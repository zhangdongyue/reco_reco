<!DOCTYPE html>
<!-- saved from url=(0039)https://www.atatech.org/articles/102403 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)</title>
  <meta name="description" content="">
  
  <meta name="viewport" content="width=1100, maximum-scale=1.0, user-scalable=yes">
  <link rel="stylesheet" href="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/app-b704f221e6baf4d80ae8febe8a470ad8952e11d0.css">
  <script src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/app-63f69630beb8fb78f075a694aa7ac6bc2a253628.js" data-main="article/show"></script>
  <script>require('main')</script>
  <!--[if lt IE 9]>
  <script src="/js/html5shiv-3.7.0.min.js"></script>
  <script src="/js/respond-1.4.2.min.js"></script>
  <![endif]-->
        <!--<base target="_blank">--><base href="." target="_blank">
  <style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.mjx-chtml {display: inline-block; line-height: 0; text-indent: 0; text-align: left; text-transform: none; font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; letter-spacing: normal; word-wrap: normal; word-spacing: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; margin: 0; padding: 1px 0}
.MJXc-display {display: block; text-align: center; margin: 1em 0; padding: 0}
.mjx-chtml[tabindex]:focus, body :focus .mjx-chtml[tabindex] {display: inline-table}
.mjx-full-width {text-align: center; display: table-cell!important; width: 10000em}
.mjx-math {display: inline-block; border-collapse: separate; border-spacing: 0}
.mjx-math * {display: inline-block; -webkit-box-sizing: content-box!important; -moz-box-sizing: content-box!important; box-sizing: content-box!important; text-align: left}
.mjx-numerator {display: block; text-align: center}
.mjx-denominator {display: block; text-align: center}
.MJXc-stacked {height: 0; position: relative}
.MJXc-stacked > * {position: absolute}
.MJXc-bevelled > * {display: inline-block}
.mjx-stack {display: inline-block}
.mjx-op {display: block}
.mjx-under {display: table-cell}
.mjx-over {display: block}
.mjx-over > * {padding-left: 0px!important; padding-right: 0px!important}
.mjx-under > * {padding-left: 0px!important; padding-right: 0px!important}
.mjx-stack > .mjx-sup {display: block}
.mjx-stack > .mjx-sub {display: block}
.mjx-prestack > .mjx-presup {display: block}
.mjx-prestack > .mjx-presub {display: block}
.mjx-delim-h > .mjx-char {display: inline-block}
.mjx-surd {vertical-align: top}
.mjx-mphantom * {visibility: hidden}
.mjx-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 2px 3px; font-style: normal; font-size: 90%}
.mjx-annotation-xml {line-height: normal}
.mjx-menclose > svg {fill: none; stroke: currentColor}
.mjx-mtr {display: table-row}
.mjx-mlabeledtr {display: table-row}
.mjx-mtd {display: table-cell; text-align: center}
.mjx-label {display: table-row}
.mjx-box {display: inline-block}
.mjx-block {display: block}
.mjx-span {display: inline}
.mjx-char {display: block; white-space: pre}
.mjx-itable {display: inline-table; width: auto}
.mjx-row {display: table-row}
.mjx-cell {display: table-cell}
.mjx-table {display: table; width: 100%}
.mjx-line {display: block; height: 0}
.mjx-strut {width: 0; padding-top: 1em}
.mjx-vsize {width: 0}
.MJXc-space1 {margin-left: .167em}
.MJXc-space2 {margin-left: .222em}
.MJXc-space3 {margin-left: .278em}
.mjx-chartest {display: block; visibility: hidden; position: absolute; top: 0; line-height: normal; font-size: 500%}
.mjx-chartest .mjx-char {display: inline}
.mjx-chartest .mjx-box {padding-top: 1000px}
.MJXc-processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MJXc-processed {display: none}
.mjx-test {display: block; font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow: hidden; height: 1px}
.mjx-ex-box-test {position: absolute; overflow: hidden; width: 1px; height: 60ex}
.mjx-line-box-test {display: table!important}
.mjx-line-box-test span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
#MathJax_CHTML_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.mjx-chtml .mjx-noError {line-height: 1.2; vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
.MJXc-TeX-unknown-R {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: normal; font-weight: normal}
.MJXc-TeX-unknown-I {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: italic; font-weight: normal}
.MJXc-TeX-unknown-B {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: normal; font-weight: bold}
.MJXc-TeX-unknown-BI {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: italic; font-weight: bold}
.MJXc-TeX-ams-R {font-family: MJXc-TeX-ams-R,MJXc-TeX-ams-Rw}
.MJXc-TeX-cal-B {font-family: MJXc-TeX-cal-B,MJXc-TeX-cal-Bx,MJXc-TeX-cal-Bw}
.MJXc-TeX-frak-R {font-family: MJXc-TeX-frak-R,MJXc-TeX-frak-Rw}
.MJXc-TeX-frak-B {font-family: MJXc-TeX-frak-B,MJXc-TeX-frak-Bx,MJXc-TeX-frak-Bw}
.MJXc-TeX-math-BI {font-family: MJXc-TeX-math-BI,MJXc-TeX-math-BIx,MJXc-TeX-math-BIw}
.MJXc-TeX-sans-R {font-family: MJXc-TeX-sans-R,MJXc-TeX-sans-Rw}
.MJXc-TeX-sans-B {font-family: MJXc-TeX-sans-B,MJXc-TeX-sans-Bx,MJXc-TeX-sans-Bw}
.MJXc-TeX-sans-I {font-family: MJXc-TeX-sans-I,MJXc-TeX-sans-Ix,MJXc-TeX-sans-Iw}
.MJXc-TeX-script-R {font-family: MJXc-TeX-script-R,MJXc-TeX-script-Rw}
.MJXc-TeX-type-R {font-family: MJXc-TeX-type-R,MJXc-TeX-type-Rw}
.MJXc-TeX-cal-R {font-family: MJXc-TeX-cal-R,MJXc-TeX-cal-Rw}
.MJXc-TeX-main-B {font-family: MJXc-TeX-main-B,MJXc-TeX-main-Bx,MJXc-TeX-main-Bw}
.MJXc-TeX-main-I {font-family: MJXc-TeX-main-I,MJXc-TeX-main-Ix,MJXc-TeX-main-Iw}
.MJXc-TeX-main-R {font-family: MJXc-TeX-main-R,MJXc-TeX-main-Rw}
.MJXc-TeX-math-I {font-family: MJXc-TeX-math-I,MJXc-TeX-math-Ix,MJXc-TeX-math-Iw}
.MJXc-TeX-size1-R {font-family: MJXc-TeX-size1-R,MJXc-TeX-size1-Rw}
.MJXc-TeX-size2-R {font-family: MJXc-TeX-size2-R,MJXc-TeX-size2-Rw}
.MJXc-TeX-size3-R {font-family: MJXc-TeX-size3-R,MJXc-TeX-size3-Rw}
.MJXc-TeX-size4-R {font-family: MJXc-TeX-size4-R,MJXc-TeX-size4-Rw}
.MJXc-TeX-vec-R {font-family: MJXc-TeX-vec-R,MJXc-TeX-vec-Rw}
.MJXc-TeX-vec-B {font-family: MJXc-TeX-vec-B,MJXc-TeX-vec-Bx,MJXc-TeX-vec-Bw}
@font-face {font-family: MJXc-TeX-ams-R; src: local('MathJax_AMS'), local('MathJax_AMS-Regular')}
@font-face {font-family: MJXc-TeX-ams-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_AMS-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-cal-B; src: local('MathJax_Caligraphic Bold'), local('MathJax_Caligraphic-Bold')}
@font-face {font-family: MJXc-TeX-cal-Bx; src: local('MathJax_Caligraphic'); font-weight: bold}
@font-face {font-family: MJXc-TeX-cal-Bw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Bold.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Bold.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-frak-R; src: local('MathJax_Fraktur'), local('MathJax_Fraktur-Regular')}
@font-face {font-family: MJXc-TeX-frak-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-frak-B; src: local('MathJax_Fraktur Bold'), local('MathJax_Fraktur-Bold')}
@font-face {font-family: MJXc-TeX-frak-Bx; src: local('MathJax_Fraktur'); font-weight: bold}
@font-face {font-family: MJXc-TeX-frak-Bw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Bold.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Bold.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-math-BI; src: local('MathJax_Math BoldItalic'), local('MathJax_Math-BoldItalic')}
@font-face {font-family: MJXc-TeX-math-BIx; src: local('MathJax_Math'); font-weight: bold; font-style: italic}
@font-face {font-family: MJXc-TeX-math-BIw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Math-BoldItalic.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Math-BoldItalic.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Math-BoldItalic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-R; src: local('MathJax_SansSerif'), local('MathJax_SansSerif-Regular')}
@font-face {font-family: MJXc-TeX-sans-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-B; src: local('MathJax_SansSerif Bold'), local('MathJax_SansSerif-Bold')}
@font-face {font-family: MJXc-TeX-sans-Bx; src: local('MathJax_SansSerif'); font-weight: bold}
@font-face {font-family: MJXc-TeX-sans-Bw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Bold.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Bold.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-I; src: local('MathJax_SansSerif Italic'), local('MathJax_SansSerif-Italic')}
@font-face {font-family: MJXc-TeX-sans-Ix; src: local('MathJax_SansSerif'); font-style: italic}
@font-face {font-family: MJXc-TeX-sans-Iw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Italic.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Italic.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-script-R; src: local('MathJax_Script'), local('MathJax_Script-Regular')}
@font-face {font-family: MJXc-TeX-script-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Script-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Script-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Script-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-type-R; src: local('MathJax_Typewriter'), local('MathJax_Typewriter-Regular')}
@font-face {font-family: MJXc-TeX-type-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Typewriter-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Typewriter-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Typewriter-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-cal-R; src: local('MathJax_Caligraphic'), local('MathJax_Caligraphic-Regular')}
@font-face {font-family: MJXc-TeX-cal-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-B; src: local('MathJax_Main Bold'), local('MathJax_Main-Bold')}
@font-face {font-family: MJXc-TeX-main-Bx; src: local('MathJax_Main'); font-weight: bold}
@font-face {font-family: MJXc-TeX-main-Bw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Main-Bold.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-I; src: local('MathJax_Main Italic'), local('MathJax_Main-Italic')}
@font-face {font-family: MJXc-TeX-main-Ix; src: local('MathJax_Main'); font-style: italic}
@font-face {font-family: MJXc-TeX-main-Iw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Main-Italic.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-R; src: local('MathJax_Main'), local('MathJax_Main-Regular')}
@font-face {font-family: MJXc-TeX-main-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Main-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-math-I; src: local('MathJax_Math Italic'), local('MathJax_Math-Italic')}
@font-face {font-family: MJXc-TeX-math-Ix; src: local('MathJax_Math'); font-style: italic}
@font-face {font-family: MJXc-TeX-math-Iw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Math-Italic.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size1-R; src: local('MathJax_Size1'), local('MathJax_Size1-Regular')}
@font-face {font-family: MJXc-TeX-size1-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Size1-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size2-R; src: local('MathJax_Size2'), local('MathJax_Size2-Regular')}
@font-face {font-family: MJXc-TeX-size2-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Size2-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size3-R; src: local('MathJax_Size3'), local('MathJax_Size3-Regular')}
@font-face {font-family: MJXc-TeX-size3-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Size3-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size4-R; src: local('MathJax_Size4'), local('MathJax_Size4-Regular')}
@font-face {font-family: MJXc-TeX-size4-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Size4-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-vec-R; src: local('MathJax_Vector'), local('MathJax_Vector-Regular')}
@font-face {font-family: MJXc-TeX-vec-Rw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Vector-Regular.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Vector-Regular.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Vector-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-vec-B; src: local('MathJax_Vector Bold'), local('MathJax_Vector-Bold')}
@font-face {font-family: MJXc-TeX-vec-Bx; src: local('MathJax_Vector'); font-weight: bold}
@font-face {font-family: MJXc-TeX-vec-Bw; src /*1*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/eot/MathJax_Vector-Bold.eot'); src /*2*/: url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/woff/MathJax_Vector-Bold.woff') format('woff'), url('https://cdn.bootcss.com/mathjax/2.7.3/fonts/HTML-CSS/TeX/otf/MathJax_Vector-Bold.otf') format('opentype')}
</style></head>
<body class="" cnzz_category="文章详情" style=""><div id="MathJax_Message" style="display: none;"></div>

      <header>
  <style>
    .navbar-nav>li {margin-right: 5px;}
  </style>
  <div class="navbar navbar-default">
    <div class="container">
      <ul class="nav navbar-nav">
        <li><a href="https://www.atatech.org/">首页</a></li>
        <li><a href="https://www.atatech.org/articles/?sort=yuan">文章</a></li>
        <li><a href="https://www.atatech.org/teams/">团队博客</a></li>
        <li><a href="https://www.atatech.org/groups/">圈子</a></li>
        <li><a href="https://www.atatech.org/ask">问答</a></li>
                <li><a href="https://www.atatech.org/activity/">活动</a></li>
        <li><a href="https://www.atatech.org/conference/">会议</a></li>
        <li class="li-margin"><a href="https://www.atatech.org/specials" target="_blank">专题</a></li>
        <li class="divider"></li>
        <li><a href="https://www.atatech.org/paper/">论文专区</a></li>
        <li><a href="https://www.atatech.org/techtalk/">对话科技</a></li>
        <li><a href="https://www.atatech.org/news/graduate_train">技术大学</a></li>
                                                                <li class="divider"></li>
        <li><a href="https://www.atatech.org/research/">合作</a></li>
      </ul>
      <ul class="nav navbar-nav pull-right">

                  <li><a target="_self" href="https://www.atatech.org/edu/mentor/">我的师弟</a></li>
                                                  <li><a target="_self" href="https://www.atatech.org/notifications/">消息</a></li>
        <li><a target="_self" href="https://www.atatech.org/feed/">动态</a></li>
        <li class="divider"></li>
        <li class="dropdown">
          <a target="_self" href="https://www.atatech.org/users/180156#information" class="navbar-avatar" data-toggle="dropdown">
            <img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/107776.80x80.jpg" width="20" height="20" alt="梵昱" class="img-circle">
            <span>&nbsp;梵昱</span>
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <li>
              <a target="_self" href="https://www.atatech.org/users/180156/own#information">
                <span class="glyphicon glyphicon-edit"></span>
                <span>我的文章</span>
              </a>
            </li>
            <li>
              <a target="_self" href="https://www.atatech.org/activity/new">
                <span class="glyphicon glyphicon-fire"></span>
                <span>发起活动</span>
              </a>
            </li>
            <li>
              <a target="_self" href="https://www.atatech.org/users/180156/ask#information">
                <span class="glyphicon glyphicon-question-sign"></span>
                <span>我的问题</span>
              </a>
            </li>
            <li>
              <a target="_self" href="https://www.atatech.org/users/180156/mark#information">
                <span class="glyphicon glyphicon-star-empty"></span>
                <span>我的收藏</span>
              </a>
            </li>
            <li>
              <a target="_self" href="https://www.atatech.org/users/180156/groups">
                <span class="glyphicon glyphicon-record"></span>
                <span>我的圈子</span>
              </a>
            </li>
            <li>
              <a target="_self" href="https://www.atatech.org/teams">
                <span class="glyphicon glyphicon-list-alt"></span>
                <span>我的博客</span>
              </a>
            </li>

                        <li>
              <a target="_self" href="https://www.atatech.org/settings/">
                <span class="glyphicon glyphicon-cog"></span>
                <span>个人设置</span>
              </a>
            </li>
                        <li class="divider"></li>
            <li>
              <a target="_self" href="https://www.atatech.org/logout" data-method="post">
                <span class="glyphicon glyphicon-log-out"></span>
                <span>退出</span>
              </a>
            </li>
          </ul><!-- /.dropdown -->
        </li>
        <li class="dropdown quick-search">
          <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
            <span class="glyphicon glyphicon-search"></span></button>
          <div class="dropdown-menu form-group" role="menu">
            <form target="_self" action="https://www.atatech.org/search" method="get" class="quick-form js-active-on-valid">
              <input type="hidden" name="type" value="ALL">
              <input type="text" name="q" class="form-control" placeholder="全站搜索" required="">
              <button type="submit" class="quick_btn"></button>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>

  </header>    <div class="container header-notice-container">
      </div>
  <style>
    ._article-container .unsafe {
      overflow: inherit;
    }
    .content table td, .content table th{
      word-wrap:break-word;
    }
    .influential-article{
      background: url(http://ata2-img.cn-hangzhou.img-pub.aliyun-inc.com/5536328776615091af700516adbe8319.png);
      background-size: 200px 200px;
      width: 200px;
      height: 200px;
      position: absolute;
      right: 174px;
      top: 127px;
      z-index: 5000;
    }

    .article-anchor {float: left;line-height:1.5;margin-left: -20px;padding-right: 4px;position:absolute;}
    .article-anchor:hover{cursor: pointer;}
    .article-anchor .ancher-link {visibility:hidden;}
    .medal {margin-left: -12px; margin-right: 5px;}
    .medal-show {display: inline-block;position: absolute; background-color: #fe4625;border-radius: 0.25em; line-height: 25px;}
    .medal-show span {color: #fff;padding: 10px;}
    .medal-hide {display: none;position: absolute}
    .medal-show:after {
      border-color: #f0f0f0 transparent transparent #f0f0f0;
      border-style: solid solid solid solid;
      border-width: 6px 3px;

      /* 必須指定，才能顯示內容 */
      content: '';

      height: 0px;
      left: 0px;

      /* 必須指定，否則會變梯形 */
      position: absolute;
      top: 25px;
      width: 0px;
    }
    .medal-show:before {
      border-color: #fe4625 transparent transparent #fe4625;
      border-style: solid solid solid solid;
      border-width: 6px 10px;

      /* 必須指定，才能顯示內容 */
      content: '';

      height: 0px;
      left: 0px;

      /* 必須指定，否則會變梯形 */
      position: absolute;

      top: 25px;
      width: 0px;
    }
    .pull-right .article-favor, .article-favor, .article-delete {
      margin-left: 10px;
    }

    .article-tag {
      margin-right: 5px;
      color: #999999;
    }

    .knowledge-tags a {
      margin-right: 8px;
      color: #999999;
    }

    .knowledge-tags a:hover {
      color: #428bca;
      text-decoration: underline;
    }

    .labels span, .labels a {
      font-size: 13px;
    }
    .labels div span, .labels .knowledge-tags span, .span-weight {
      font-weight: 700;
      color: #666;
    }

    .article-title {
      text-align: center;
      border-bottom: #dfdfdf 1px solid;
      margin-bottom: 10px;
      padding-bottom: 15px;
    }

    .special-attr {
      color: #FF3300;
      margin-right: 10px;
      font-weight: 700;
    }

    .special-yuan {
      color: #009933 !important;
    }

  </style>
  
    <div class="container">
    <div class="_article-container">
      <div class="_article-box" role="main">
        <article class="_article">
          <header class="heading">
            <div class="infos clearfix">
              <a href="https://www.atatech.org/users/166809" class="info" title="壶源"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/106083.80x80.jpg" width="32" height="32" alt="壶源" class="img-user"><span>&nbsp;壶源</span></a>                            <span class="info">
                              <time class="" datetime="2018-05-24T20:24:35+08:00">2018-05-24 20:24:35</time>
                                  (最初创作于: 2018-03-12 21:24:13)
                              </span>
                                                            <span class="info">
                  发表于：
                  <a href="https://www.atatech.org/teams/12">阿里妈妈技术团队</a>
                                      <span>&gt;&gt;</span>
                    <a href="https://www.atatech.org/teams/12?cid=63">算法</a>
                                  </span>
              
              <div class="pull-right">
                <span class="info">3017  阅读</span>
                <span id="tools_favor_top" class="article-favor"></span>
                
                              </div>
            </div>

            
            <div class="labels">
  <div class="knowledge-tags">
    <span class="k-span">知识体系：</span>
          <a class="ktag" href="https://www.atatech.org/articles/?kid=33" data-kid="33">搜索</a>
          <a class="ktag" href="https://www.atatech.org/articles/?kid=34" data-kid="34">广告</a>
          <a class="ktag" href="https://www.atatech.org/articles/?kid=37" data-kid="37">机器学习／深度学习</a>
          <a class="ktag" href="https://www.atatech.org/articles/?kid=41" data-kid="41">NLP</a>
          <a class="ktag" href="https://www.atatech.org/articles/?kid=46" data-kid="46">算法平台</a>
          <a class="ktag" href="https://www.atatech.org/articles/?kid=52" data-kid="52">商品</a>
        <button href="/knowledge/knowledgeTags?type=show&amp;aid=102403" class="btn btn-default btn-xs kbutton" data-toggle="modal" data-target="#editKnowledgeTagModal">
      <span class="glyphicon glyphicon-pencil"></span>
      修改知识体系
    </button>
  </div>
</div>

  <div class="modal fade" id="editKnowledgeTagModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div>

            <div class="labels">
    <form target="_self" accept-charset="UTF-8" action="https://www.atatech.org/articles/102403/tags" autocomplete="off" method="post" data-remote="true" data-done="$(this).closest(&#39;.labels&#39;).replaceWith(r);$.alert(&#39;修改成功&#39;, &#39;success&#39;)" style="display:none">
    <input type="hidden" name="_method" value="put">
    <div class="form-group">
      <input type="text" name="tags" class="form-control selectized" value="推荐算法 搜索 广告 深度学习 匹配 向量检索 " tabindex="-1" style="display: none;"><div class="selectize-control form-control multi plugin-remove_button"><div class="selectize-input items not-full has-options has-items"><div data-value="推荐算法" class="item">推荐算法<a href="javascript:void(0)" class="remove" tabindex="-1" title="Remove">×</a></div><div data-value="搜索" class="item">搜索<a href="javascript:void(0)" class="remove" tabindex="-1" title="Remove">×</a></div><div data-value="广告" class="item">广告<a href="javascript:void(0)" class="remove" tabindex="-1" title="Remove">×</a></div><div data-value="深度学习" class="item">深度学习<a href="javascript:void(0)" class="remove" tabindex="-1" title="Remove">×</a></div><div data-value="匹配" class="item">匹配<a href="javascript:void(0)" class="remove" tabindex="-1" title="Remove">×</a></div><div data-value="向量检索" class="item">向量检索<a href="javascript:void(0)" class="remove" tabindex="-1" title="Remove">×</a></div><input type="text" autocomplete="off" tabindex="" style="width: 4px;"></div><div class="selectize-dropdown form-control multi plugin-remove_button" style="display: none;"><div class="selectize-dropdown-content"><div data-value="Java核心技术" data-selectable="" class="option active">Java核心技术</div><div data-value="Java" data-selectable="" class="option">Java</div><div data-value="架构" data-selectable="" class="option">架构</div><div data-value="前端与交互设计" data-selectable="" class="option">前端与交互设计</div><div data-value="分布式系统与计算" data-selectable="" class="option">分布式系统与计算</div><div data-value="算法" data-selectable="" class="option">算法</div><div data-value="数据存储与数据库" data-selectable="" class="option">数据存储与数据库</div><div data-value="编程语言" data-selectable="" class="option">编程语言</div><div data-value="测试技术" data-selectable="" class="option">测试技术</div></div></div></div>
    </div>
    <div class="form-group text-right">
      <button type="button" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;.labels&#39;).children().toggle()">取消</button>
      <button type="submit" class="btn btn-primary btn-sm">更新</button>
    </div>
  </form>
  
  <div>
    <span>文章标签：</span>
          <a class="article-tag" href="https://www.atatech.org/search?q=%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95&amp;type=INSIDE_ARTICLE_TAG">推荐算法</a>
          <a class="article-tag" href="https://www.atatech.org/search?q=%E6%90%9C%E7%B4%A2&amp;type=INSIDE_ARTICLE_TAG">搜索</a>
          <a class="article-tag" href="https://www.atatech.org/search?q=%E5%B9%BF%E5%91%8A&amp;type=INSIDE_ARTICLE_TAG">广告</a>
          <a class="article-tag" href="https://www.atatech.org/search?q=%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0&amp;type=INSIDE_ARTICLE_TAG">深度学习</a>
          <a class="article-tag" href="https://www.atatech.org/search?q=%E5%8C%B9%E9%85%8D&amp;type=INSIDE_ARTICLE_TAG">匹配</a>
          <a class="article-tag" href="https://www.atatech.org/search?q=%E5%90%91%E9%87%8F%E6%A3%80%E7%B4%A2&amp;type=INSIDE_ARTICLE_TAG">向量检索</a>
              <button type="button" id="edit-tags" class="btn btn-default btn-xs" onclick="$(this).closest(&#39;.labels&#39;).children().toggle()">
        <span class="glyphicon glyphicon-pencil"></span>
        修改标签
      </button>
      <a href="https://www.atatech.org/articles/102403/tags/history" class="btn btn-default btn-xs" data-toggle="modal" data-target="#modal-tag-history">
        <span class="glyphicon glyphicon-time"></span>
        标签历史
      </a>
      </div>
</div>

                          <div class="labels">
                <span class="span-weight">附加属性：</span>
                                  <span class="special-attr">内部资料请勿外传</span>
                                                  <span class="special-attr special-yuan">作者原创</span>
                                                                                                              </div>
            
            
                      </header>

            <div class="article-title">
              <h1 class="title clearfix unsafe">
                超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)
                              </h1>
            </div>

          <div class="content unsafe md" style="background: rgba(0, 0, 0, 0) url(https://www.atatech.org/public/watermark.png) repeat scroll 0 0">
                          <p>作者：壶源，探微，谨持，玺羽，靖世</p>
<h2 id="0"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#0"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>I 背景</h2>
<p>推荐、搜索、广告投放是互联网内容提供商进行流量分配的核心业务，也是大数据和机器学习技术的典型应用场景。无论是推荐，搜索，还是广告投放问题，都可以描述为从大规模候选中给用户提供有限的展现结果以获取用户的正向反馈（广告投放还需额外考虑广告主意愿和体验）。在具体实现中，由于在线业务对性能尤其是响应时间的严格要求，我们往往会把上述过程拆分为两个阶段——匹配（Match）+排序（Rank）。以淘宝推荐系统为例，匹配阶段的核心在于如何从全量商品（Item）中根据用户（User）信息召回合适的TopK候选集合，排序阶段则是对TopK候选集合进行精细化打分并排序输出最终展现的结果。排序阶段因为候选集小，可以引入诸如深度学习等非常复杂的模型来优化目标，达到最终效果（相关性、广告收益等）的提升，业界对此阶段的研究比较集中和深入，比如精准广告业务线在排序阶段的CTR预估上引入了基于Attention结构的深度兴趣模型（DIN，详见附录），取得了非常好的业务效果。而匹配阶段由于问题规模大，复杂模型在此阶段的应用存在一定的局限性，所以业界对这方面的研究尤其是深度学习在此阶段的应用仍处在发展阶段。回到上述关于两阶段的描述，可以看出<font color="red">匹配阶段产生的候选集的质量会成为最终效果的天花板</font>，因此如何创新和发展匹配技术是对业务有着重大意义的问题，也一直是业界和学术界关注的重点问题。<br>
以推荐为例，在工业级的推荐系统中，匹配阶段往往面临很多技术挑战。例如当候选集非常大的时候，要从全量候选集中挑选TopK集合，我们无法接受随着全量候选集大小而线性增长的时间复杂度，这使得一些学术界研究的需要计算全量 {User，Item} 兴趣度的方法并不能真正应用于实际推荐系统中的匹配阶段。在有限的计算资源下，如何根据用户信息从全量候选集中快速得到高质量的TopK候选集，需要在计算效率和计算准确性上做精巧的平衡。作为真实应用的推荐系统，其匹配阶段的计算时间需要被限制，简单用以下公式表示：</p>
<div align="center"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/dd0d0fe2-ba37-454f-a3f8-08ed19858202.png"></div>
<p></p><p></p>
<p align="center">公式（1）</p>
<p>其中T表示单次计算的时间消耗，N可以认为是为单个用户召回TopK需要的总体计算次数。在上述公式的约束下，围绕如何提升匹配效果，<font color="red">工业界的技术发展也经历了几代的演进，从最初的基于统计的启发式规则方法，逐渐过渡到基于内积模型的向量检索方法。然而这些方法在技术选型上都在上述计算效率约束下对匹配效果进行了很大的牺牲。如何在匹配阶段的计算效率约束下引入更先进的复杂深度学习模型成为了下一代匹配技术发展的重要方向</font>。</p>
<h2 id="1"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#1"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>II 相关技术</h2>
<p>如上文所述，结合工业级推荐系统的约束，匹配技术经历了从基于统计的启发式规则方法到基于内积模型的向量检索方法的转变，具体描述如下：<br>
<strong>I）第一代——基于统计的启发式规则方法</strong><br>
这一类方法的经典代表就是Item-based Collaborative Filtering（Item-CF），也是阿里集团现在应用最广的推荐算法之一。Item-CF的算法原理是：首先通过统计计算得到Item to Item（I2I）的相似关系，其次启发式地获取用户近期行为作为Trigger Item集合，用它们进行I2I扩展，最后以某种打分规则对扩展后的Item集合进行排序，截断得到TopK作为候选集进行后续排序流程。结合公式（1），我们可以知道这种方法有效的控制了总体计算次数N，因为用户的Trigger Item集合是有限的，相似关系圈定的候选集合也是有限的，从而避免了对全量候选集的计算，同时简单的打分规则可以有效地控制单次计算时间T，两者使得最终整体方法的计算量较少，满足了在线应用的要求。<br>
这种方法在业务初期简单有效（对比非个性化的方式），包括在集团内的很多推荐场景都有它的身影。但从算法原理不难看出，这种方法天然存在一大弊端：<font color="red">它限制了尝试推荐给用户未曾行为过但可能感兴趣的Item的可能性。这种将候选限定在历史兴趣相似范畴内的启发式规则对推荐效果的提升有限，它降低了用户体验（尤其是推荐结果的惊喜度），也制约了系统整体的可持续发展能力</font>。尽管后续的排序环节可以引入复杂的机器学习方法，例如MLR（混合逻辑回归，详见附录），FM（因子分解）或者深度学习，但它们都依赖于匹配给出的候选结果，所以<font color="red">无论如何复杂的模型都突破不了匹配给定的上限</font>。</p>
<p><strong>II）第二代——基于内积模型的向量检索方法</strong><br>
引入机器学习方法来提升匹配能力是业界共识和趋势。机器学习本质上是一个衡量模型，可以衡量用户对商品的兴趣度。这种基于模型的匹配方法理论上要衡量一个用户对所有商品的兴趣度，从而挑选出最优的推荐结果。这就带来了问题：对于大规模商品候选集的场景是计算不可行的。如何化解计算不可行的问题？研究人员提出了以向量距离的方式衡量用户和商品兴趣度的方法，用户和商品被表示成向量形式，并以此为基础建立基于向量聚类的索引结构进一步加速衡量效率，于是这个计算问题变成了在有限时间内是可解的（近似求解），具体实现也落到了向量引擎的范畴。结合公式（1），T代表简单的向量内积计算时间，而N则通过建立向量索引结构从而控制在O(桶候选集规模)的较小范围内。所以内积式模型和向量引擎成为了最近几年匹配领域技术革新的最重要技术（图像检索问题最早就是采用的这种方法）。尤其是去年Facebook的Faiss框架开源，极大降低了业界尝试向量引擎的难度，对行业发展起到了极大的促进作用。至此，基于内积模型的向量检索方法引领了第二代匹配和推荐技术的潮流，在各类学术会议和工业实践中大放异彩。<br>
然而问题是，这类方法并未实现充分利用机器学习解决匹配问题的初衷，对机器学习模型的限制太大。<font color="red">高阶深度学习大部分都不可划成内积形式</font>，比如CTR预估里用户和商品特征交叉非常有用，大部分不可用内积表示。而在<font color="red">现有深度学习中内积模型的表达能力被证明是有限的</font>，比如将内积模型中最后的内积运算直接换成多层感知机能大幅提升模型能力，而多层PNN，DIN（详见附录）等对用户兴趣更有洞察力的复杂模型效果被证明能极大的超越内积模型。<br>
与此同时，我们也发现在具体实践中，向量检索算法要求User和Item能够映射到统一的向量空间。User输入信息和Item输入信息一般并不同质，如何保证映射到统一目标向量空间下的检索精度对映射算法提出了严格的要求，换言之，统一的向量空间映射对运用向量检索来解决推荐问题带来了精度损失的风险。</p>
<p><strong>III）下一代匹配和推荐技术</strong><br>
结合上文的描述，匹配技术发展的核心点在于系统性能限制下尽可能提升兴趣的衡量精度（从规则算法到引入先进模型）和覆盖范围（从限定候选集到全量候选集）。<font color="red">为此我们尝试对下一代匹配和推荐技术进行研究，自主提出了一种<strong>更通用的匹配和推荐算法框架</strong>，它允许<strong>容纳任意先进模型</strong>而非限定内积形式，并且能够<strong>对全量候选集</strong>进行更好的匹配</font>。无论在公开数据集还是在阿里数据集上，新方法的召回率和新颖性对比前两代技术都有飞跃性的提高。我们的方法以推荐问题为例进行展开，实验也是在推荐应用的场景下进行的。值得指出的是，匹配问题本身作为推荐、搜索、广告投放业务中的核心模块，使得我们的方法具有很强的普适性。</p>
<h2 id="2"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#2"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>III 技术方案</h2>
<p>承上所述，第二代基于内积模型向量检索的方案，限定模型结构以实现检索效率的提升，因此要想进一步释放模型能力就必须使得整体检索结构的设计与模型结构的设计解耦（向量内积检索与内积模型即是一种强耦合关联）。面对一个复杂问题，人脑常有的一个思考方式是先从大的层面入手，确定大方向后具体细化。我们也从这个角度入手，思考是否可以有一种从粗到细的检索方式，逐步判断并细化，最后给出最优推荐。基于这个思考，我们把探索方向定位在了使用层次化树结构增加检索效率上。然而，模糊的上层概念想起来容易，概念上万物皆通，真正难的是否能在数学和技术上构建出一条真正可行的路径。就匹配问题而言，树检索结构的引入伴随着一系列的问题要解决：1、树结构是如何构建的；2，如何基于树进行匹配建模；3、如何围绕树结构实现高效的兴趣计算和检索。</p>
<p><strong>概率连乘树并不适用匹配问题：</strong><br>
在有了使用层次化树结构来增加检索效率的思路后，我们首先尝试了概率连乘树的形式。这个形式在Natural Language Processing（自然语言处理）中已经有了一些工作和探讨（例如Hierarchical Softmax，Word2Vec等）。虽然最后不幸的发现，这个优美的概率形式并不能对匹配问题带来实质的帮助，但它对真正理清匹配问题的要点和难点从而提出真正可用的方法是很有帮助的。以Hierarchical Softmax（以下简称HS）为例，每一个叶子节点（词）都有到根节点编码唯一的一条路径，而给定前置上文，下一个词出现的概率被建模为编码路径上分类概率的连乘。传统的多分类Softmax里归一化项依赖所有类别项的计算，所以即使计算一个类别的概率的计算量也很大，而通过概率连乘树的方式，HS有效避免了在传统Softmax建模中需要遍历所有叶子节点计算分母归一化项的过程。假设我们通过类似HS的方式建立了叶子节点为商品的树，把上下文认为是用户输入，把输出的叶子节点概率认为是用户对商品的兴趣度，看上去HS可以解决我们的匹配问题。但经过我们的分析和实践，事实并非如此。<br>
&nbsp;&nbsp;&nbsp;&nbsp;1）HS方法解决了给定上文进行节点概率快速计算的问题，即通过引入Hierarchical Structure避免了对全量候选集的逐一计算和归一化，直接计算得到节点概率。但对于匹配和推荐TopK这类全局寻优问题HS并不适用，因为当给定用户输入时，寻找最优的TopK候选我们仍然需要遍历所有的叶子节点，计算各个叶子的连乘概率，对概率排序得到最优的K个。而任何贪心的检索方法如BeamSearch，都无法保证检索得到的TopK是全局最优的，即HS建模方式下每一层的最优连乘并不保证全局最优。所以需要遍历全部叶子计算的HS方法并不适合大规模候选集的匹配和推荐问题。<br>
&nbsp;&nbsp;&nbsp;&nbsp;2）与此同时，HS方法在建树时往往会考虑将某种具有相似关系（语义、词频等）的节点靠近组成兄弟。而HS方法在计算路径概率时把每一个节点的概率计算看作是二分类问题，用于判断接下来选择哪个孩子节点继续走下去。这种判断优与次优的分类方法对于HS是适用和有效的，但对于匹配和推荐问题却是无法成立的，因为当两个孩子具有某种相似关系时，用户往往是同时喜欢或者同时不喜欢。也就说在单层节点上，匹配和推荐要求的是该层上的全局序判别问题，而HS方法解决的是同一父亲下两个孩子节点谁更优的问题。<br>
在采用HS方法进行匹配和推荐的实践中，包括YouTube团队在他们的内积模式向量检索做匹配的文章中提到了他们采用HS方法学习用户和候选Video的偏好关系，但是效果并不理想。而我们最先也在阿里妈妈广告测试集上进行了HS方法的尝试，效果也不如预期。值得一提的是，这样的树方法在算法和工程上都复杂度极高。这么一个大工程效果却不尽人如意使得整个项目组经历了最艰难的一段时间。我们根据BadCase对算法（主要是样本构成）做了很多调整，并最终调出了效果（当时也发布了一篇ATA文章）。可这些调整细节，使得算法和树概率形式理论不完全对应，一直是我们心中的隐忧。直到我们提出了新的树形式理论，不仅完美和有效方法对应，而且基于新理论我们建立了完整的树结构全库检索方法。</p>
<p><strong>最大堆树的提出和构建：</strong><br>
推翻概率连乘树方法的思路，我们需要构建一套全新的方法体系来实现树结构的构建、基于树的训练采样和TopK检索、以及节点兴趣度计算的统一。回到匹配问题本身，假定全量候选集中的每一个商品都是一个叶子节点，当前用户对所有叶子节点背后都存在一个真实的兴趣度，用概率<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-1-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-1" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-2" class="mjx-mrow"><span id="MJXc-Node-3" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span id="MJXc-Node-4" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-5" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span><span id="MJXc-Node-6" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">(</span></span><span id="MJXc-Node-7" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span><span id="MJXc-Node-8" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>P</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1">P_i(u)</script>表示。我们并不知道其具体值，只有根据概率采样出来的样本（用户真实反馈）。对于一般的模型，我们可以对叶子节点的概率建模，但是要找TopK需要遍历所有节点，计算量太大。因此我们创新性的提出了兴趣最大堆树（Max-heap like Tree）的概念，其定义树上节点的概率如下：</p>
<div align="center"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/225ade5f-23fb-4598-ad11-f1fb3fdd9639.png"></div>
<p></p><p></p>
<p align="center">公式（2）</p>
<p>即用户对第<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-2-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-9" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-10" class="mjx-mrow"><span id="MJXc-Node-11" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">j</script>层父亲节点兴趣的偏好概率正比于用户对第<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-3-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-12" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-13" class="mjx-mrow"><span id="MJXc-Node-14" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span><span id="MJXc-Node-15" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.318em; padding-bottom: 0.423em;">+</span></span><span id="MJXc-Node-16" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">1</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-3">j+1</script>层孩子节点兴趣的偏好概率最大值，其中<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-4-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-17" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-18" class="mjx-mrow"><span id="MJXc-Node-19" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-20" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">α</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-21" class="mjx-texatom" style=""><span id="MJXc-Node-22" class="mjx-mrow"><span id="MJXc-Node-23" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">(</span></span><span id="MJXc-Node-24" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span><span id="MJXc-Node-25" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">)</span></span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>α</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-4">\alpha^{(j)}</script>是第<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-5-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-26" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-27" class="mjx-mrow"><span id="MJXc-Node-28" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-5">j</script>层节点兴趣概率的归一化因子。根据最大堆树的定义，如果已知这棵树上的每层节点概率之间的序（同层内），我们可以快速找到全局TopK，即从根节点出发找当前层的TopK，然后在上层TopK节点对应的下层孩子节点集合中继续找TopK，递归向下直至叶子。但问题是这棵树上的节点概率我们现在并不知道，但是我们可以想办法得到符合树节点概率的序的样本，然后用深度学习在这个样本上进行拟合也即得到了节点概率之间的序。具体地，对于任意一个用户有行为的叶子节点采样i，隐含了叶子层的序：<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-6-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-29" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-30" class="mjx-mrow"><span id="MJXc-Node-31" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span id="MJXc-Node-32" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-33" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>P</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-6">P_i</script> &gt; <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-7-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-34" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-35" class="mjx-mrow"><span id="MJXc-Node-36" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span id="MJXc-Node-37" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-38" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>P</mi><mi>j</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-7">P_j</script>, for all <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-8-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;&amp;#x2260;&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-39" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-40" class="mjx-mrow"><span id="MJXc-Node-41" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span><span id="MJXc-Node-42" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.423em; padding-bottom: 0.58em;">≠</span></span><span id="MJXc-Node-43" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mo>≠</mo><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">i \neq j</script>。根据我们的树节点概率定义（最大堆性质），可以向上递归推出每层节点概率的序。根据这个序我们进行负样本采样，用深度学习模型基于这个采样去学习，以逼近最大堆树上每层的序。</p>
<p><strong>全局分类器的设计理念：</strong><br>
承上文所述，我们构建每一层的兴趣节点模型要严格满足最大堆概率公式是很困难，但是可以得到符合树节点概率的序的样本。而且在检索过程中，我们只需要每一层的节点概率序确定TopK即可，这里面需要特别说明的是虽然每一层的TopK候选集由上层父亲决定，但该层TopK的排序选取本身并不受父辈的影响，也即每一层的TopK排序都是独立的，父辈的排序分数不参与子辈的排序计算，这一点也是我们的方案区别与概率连乘树在计算形式上的不同。<br>
于是我们可以将每层节点的兴趣判别单独建模，构建针对单层节点的全局分类器来保证在单层上的精确分类能力。从叶子节点层建模出发确定采样方式，同时结合最大堆的概率定义，确定每一层的采样方式和建模方式。如果用户对叶子节点<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-9-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-44" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-45" class="mjx-mrow"><span id="MJXc-Node-46" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-47" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-48" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-9">n_i</script>感兴趣，那么对于其他不感兴趣叶子节点<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-10-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-49" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-50" class="mjx-mrow"><span id="MJXc-Node-51" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-52" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-53" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>j</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-10">n_j</script>，有<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-11-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;gt;&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-54" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-55" class="mjx-mrow"><span id="MJXc-Node-56" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.109em;">P</span></span><span id="MJXc-Node-57" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">(</span></span><span id="MJXc-Node-58" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-59" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-60" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span><span id="MJXc-Node-61" class="mjx-texatom"><span id="MJXc-Node-62" class="mjx-mrow"><span id="MJXc-Node-63" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">|</span></span></span></span><span id="MJXc-Node-64" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span><span id="MJXc-Node-65" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">)</span></span><span id="MJXc-Node-66" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.265em; padding-bottom: 0.37em;">&gt;</span></span><span id="MJXc-Node-67" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.109em;">P</span></span><span id="MJXc-Node-68" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">(</span></span><span id="MJXc-Node-69" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-70" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-71" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span><span id="MJXc-Node-72" class="mjx-texatom"><span id="MJXc-Node-73" class="mjx-mrow"><span id="MJXc-Node-74" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">|</span></span></span></span><span id="MJXc-Node-75" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span><span id="MJXc-Node-76" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><msub><mi>n</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>u</mi><mo stretchy="false">)</mo><mo>&gt;</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>n</mi><mi>j</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>u</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-11">P(n_i|u) > P(n_j|u)</script>，根据公式（2），对于叶子节点<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-12-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-77" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-78" class="mjx-mrow"><span id="MJXc-Node-79" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-80" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-81" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-12">n_i</script>的父节点<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-13-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msubsup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/msubsup&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-82" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-83" class="mjx-mrow"><span id="MJXc-Node-84" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-85" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-stack" style="vertical-align: -0.311em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-87" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.475em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span id="MJXc-Node-86" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mi>n</mi><mi>i</mi><mi>p</mi></msubsup></math></span></span><script type="math/tex" id="MathJax-Element-13">n^p_i</script>和<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-14-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-88" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-89" class="mjx-mrow"><span id="MJXc-Node-90" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-91" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-92" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>j</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-14">n_j</script>的父节点<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-15-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msubsup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/msubsup&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-93" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-94" class="mjx-mrow"><span id="MJXc-Node-95" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-96" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-stack" style="vertical-align: -0.311em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-98" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.475em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span id="MJXc-Node-97" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mi>n</mi><mi>j</mi><mi>p</mi></msubsup></math></span></span><script type="math/tex" id="MathJax-Element-15">n^p_j</script>，有<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-16-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msubsup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/msubsup&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;gt;&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msubsup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/msubsup&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-99" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-100" class="mjx-mrow"><span id="MJXc-Node-101" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.109em;">P</span></span><span id="MJXc-Node-102" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">(</span></span><span id="MJXc-Node-103" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-104" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-stack" style="vertical-align: -0.311em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-106" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.475em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span id="MJXc-Node-105" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span><span id="MJXc-Node-107" class="mjx-texatom"><span id="MJXc-Node-108" class="mjx-mrow"><span id="MJXc-Node-109" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">|</span></span></span></span><span id="MJXc-Node-110" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span><span id="MJXc-Node-111" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">)</span></span><span id="MJXc-Node-112" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.265em; padding-bottom: 0.37em;">&gt;</span></span><span id="MJXc-Node-113" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.109em;">P</span></span><span id="MJXc-Node-114" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">(</span></span><span id="MJXc-Node-115" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-116" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-stack" style="vertical-align: -0.311em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-118" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.475em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span id="MJXc-Node-117" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span></span><span id="MJXc-Node-119" class="mjx-texatom"><span id="MJXc-Node-120" class="mjx-mrow"><span id="MJXc-Node-121" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">|</span></span></span></span><span id="MJXc-Node-122" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span><span id="MJXc-Node-123" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><msubsup><mi>n</mi><mi>i</mi><mi>p</mi></msubsup><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>u</mi><mo stretchy="false">)</mo><mo>&gt;</mo><mi>P</mi><mo stretchy="false">(</mo><msubsup><mi>n</mi><mi>j</mi><mi>p</mi></msubsup><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>u</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-16">P(n^p_i|u) > P(n^p_j|u)</script>。这种设计使得训练得到的模型在单层分类上有更好的判别能力，即使在上层分类发生偏差的情况下，在当前层的分类也具备“去伪存真”的能力。当然，分层全局分类能力的设计对样本采样提出了新的要求，后续模型训练章节详细阐述了具体采样方式。以上的综合设计使得对全库TopK检索的计算次数限制在log(候选集规模)量级，有效控制了N的大小，而且单次计算并不要求限定于内积等简单形式，从而允许其容纳更先进的模型。</p>
<p><strong>最大堆树背后的方法论：</strong><br>
最大堆树结构定义背后描述的直观意义是用户兴趣的层次结构，如果用户对具体的商品感兴趣，例如iPhone，那么用户对更高层的节点，例如手机类目，也是感兴趣的。用户的兴趣结构具有天然的层次性，最大堆树结构定义了用户从细粒度兴趣到粗粒度兴趣的传递过程，也在刻画用户的这种兴趣的层次结构。当然描绘用户的兴趣层次结构不限于最大堆树结构，但是我们提出的最大堆树结构在方法上具有独到之处，其从方法论层面统一了树结构的构建过程，树节点的兴趣建模和采样方式，兴趣树背后的TopK检索流程。</p>
<p>综上所述，从最大堆树结构定义出发，我们提出了Tree-based Deep Match（以下简称TDM）算法框架（图1）。TDM以淘宝商品体系为初始化依托，自顶向下构造从粗到细的兴趣层次树（Tree），并在此基础上应用深度学习网络进行用户兴趣的推荐建模，赋能单点计算上的复杂模型，运用层次检索方法实现全量候选上的用户TopK商品兴趣推荐。</p>
<div align="center"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/6ec43346-3ca2-4de4-806e-e604fa93e52d.png"></div>
<p></p><p></p>
<p align="center"> 图1 Tree-based Deep Match算法框架 </p>
<p>基于如上的设计和实现，TDM的贡献包含以下几点：</p>
<ul>
<li><strong>创新的最大堆树检索结构使得使用任意高级深度学习模型变得可能，带来推荐效果的极大提升</strong></li>
</ul>
<p>TDM采用树来组织用户兴趣层次，并将之做为兴趣推荐的层次检索结构载体，良好的亚线性O(log(候选集规模))时间复杂度使得TDM的检索过程非常高效，这种高效为TDM引入先进复杂模型提升检索精度提供了强大支持。在单独计算每个兴趣节点的偏好时，TDM不局限于特定的模型结构（如内积等），可以引入更加切合数据特性的复杂模型结构来优化预测结果，例如基于用户历史行为的Attention结构，树节点Embedding下沉到输入层，用户和树节点的历史交叉信息引入等等。无论上述哪种复杂计算的引入，在TDM的对比实验中都取得了更优的推荐效果。</p>
<ul>
<li><strong>全库检索能力可以有效提升召回准确度和新颖性</strong></li>
</ul>
<p>TDM实现了面向全量候选集的检索能力，通过对用户兴趣进行层次切分和逐层圈选，TDM避免了直接在全量候选集上的超大计算，它采用将大问题切割成多个小问题递归求解的方式实现全库检索。受益于全库检索的实现，TDM可以提升结果的新颖比例并保持了召回效果，而借助于先进模型计算能力的引入TDM可以达到新颖性指标提升的同时进一步优化召回的准确度。</p>
<ul>
<li><strong>再创新的树-模型联合训练实现树结构和模型能力的双优化，进一步大幅提升效果</strong></li>
</ul>
<p>在基础TDM算法框架之上，我们继续创新性地建立了树-模型联合训练框架，通过初始树-模型训练-树重建-模型再训练的循环迭代，树的结构随着模型的演进不断得到优化，使得树更契合用户的兴趣组成和分布，而模型训练也受益于优化后的树结构，进一步降低Loss提升测试效果。联合训练为TDM带来了10%以上的测试效果提升，具体对比可参见后文实验效果部分。</p>
<p>下述章节将详细阐述TDM在模型训练、结果预测（TopK检索）和树联合训练方面的设计和实现。</p>
<h2 id="3"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#3"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IV 方案细节</h2>
<h3 id="4"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#4"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一，模型训练</h3>
<p>如上述章节所陈，我们将大规模候选集上的TopK匹配和推荐问题转换成一系列前后相依的全局分类问题，也即我们需要在树的每一层建立一个全局分类器，计算该层节点概率的序，得到最优TopK个候选。我们选择负样本采样（Negative Sampling）的方式进行样本生成，以最大似然估计的方式对这些分类器进行训练。<br>
具体地，设<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-17-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-124" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-125" class="mjx-mrow"><span id="MJXc-Node-126" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-17">n</script>为树中的某个节点，我们有用户<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-18-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-127" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-128" class="mjx-mrow"><span id="MJXc-Node-129" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi></math></span></span><script type="math/tex" id="MathJax-Element-18">u</script>对节点<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-19-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-130" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-131" class="mjx-mrow"><span id="MJXc-Node-132" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-19">n</script>的偏好预测概率为： <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-20-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo maxsize=&quot;1.623em&quot; minsize=&quot;1.623em&quot;&gt;(&lt;/mo&gt;&lt;/mrow&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo maxsize=&quot;1.2em&quot; minsize=&quot;1.2em&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo maxsize=&quot;1.623em&quot; minsize=&quot;1.623em&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-133" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-134" class="mjx-mrow"><span id="MJXc-Node-135" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.109em;">P</span></span><span id="MJXc-Node-136" class="mjx-texatom"><span id="MJXc-Node-137" class="mjx-mrow"><span id="MJXc-Node-138" class="mjx-mo"><span class="mjx-char MJXc-TeX-size2-R" style="padding-top: 0.948em; padding-bottom: 0.948em;">(</span></span></span></span><span id="MJXc-Node-139" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-140" class="mjx-texatom"><span id="MJXc-Node-141" class="mjx-mrow"><span id="MJXc-Node-142" class="mjx-munderover"><span class="mjx-stack"><span class="mjx-over" style="height: 0.213em; padding-bottom: 0.06em; padding-left: 0.083em;"><span id="MJXc-Node-144" class="mjx-mo" style="vertical-align: top;"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.423em; padding-bottom: 0.318em;">^</span></span></span><span class="mjx-op"><span id="MJXc-Node-143" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.475em; padding-right: 0.006em;">y</span></span></span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.375em; padding-right: 0.071em;"><span id="MJXc-Node-145" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span><span id="MJXc-Node-146" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">(</span></span><span id="MJXc-Node-147" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span><span id="MJXc-Node-148" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">)</span></span><span id="MJXc-Node-149" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.055em; padding-bottom: 0.318em;">=</span></span><span id="MJXc-Node-150" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">1</span></span><span id="MJXc-Node-151" class="mjx-texatom"><span id="MJXc-Node-152" class="mjx-mrow"><span id="MJXc-Node-153" class="mjx-mo" style="vertical-align: -0.076em;"><span class="mjx-delim-v"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em; margin-bottom: -0.898em;">∣</span><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em; margin-top: -0.898em;">∣</span></span></span></span></span><span id="MJXc-Node-154" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span><span id="MJXc-Node-155" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.155em; padding-bottom: 0.528em;">,</span></span><span id="MJXc-Node-156" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span><span id="MJXc-Node-157" class="mjx-texatom"><span id="MJXc-Node-158" class="mjx-mrow"><span id="MJXc-Node-159" class="mjx-mo"><span class="mjx-char MJXc-TeX-size2-R" style="padding-top: 0.948em; padding-bottom: 0.948em;">)</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mo maxsize="1.623em" minsize="1.623em">(</mo></mrow><msub><mrow class="MJX-TeXAtom-ORD"><mover><mi>y</mi><mo stretchy="false">^</mo></mover></mrow><mi>u</mi></msub><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo maxsize="1.2em" minsize="1.2em">|</mo></mrow><mi>n</mi><mo>,</mo><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mo maxsize="1.623em" minsize="1.623em">)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-20"> P\Big(\hat{y}_u(n)=1 \big|n, u\Big) </script><br>
根据公式（2），用户<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-21-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-160" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-161" class="mjx-mrow"><span id="MJXc-Node-162" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi></math></span></span><script type="math/tex" id="MathJax-Element-21">u</script>对<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-22-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-163" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-164" class="mjx-mrow"><span id="MJXc-Node-165" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-166" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-167" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-22">n_i</script>感兴趣，隐含了<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-23-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-168" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-169" class="mjx-mrow"><span id="MJXc-Node-170" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi></math></span></span><script type="math/tex" id="MathJax-Element-23">u</script>对<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-24-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-171" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-172" class="mjx-mrow"><span id="MJXc-Node-173" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-174" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-175" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-24">n_i</script>的父亲<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-25-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msubsup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/msubsup&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-176" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-177" class="mjx-mrow"><span id="MJXc-Node-178" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-179" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-stack" style="vertical-align: -0.311em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-181" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.475em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span id="MJXc-Node-180" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mi>n</mi><mi>i</mi><mi>p</mi></msubsup></math></span></span><script type="math/tex" id="MathJax-Element-25">n^p_i</script>也感兴趣，所以假设<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-26-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-182" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-183" class="mjx-mrow"><span id="MJXc-Node-184" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-185" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-186" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-26">n_i</script>为某叶子节点，那么我们就有了一条唯一的路径{<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-27-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-187" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-188" class="mjx-mrow"><span id="MJXc-Node-189" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-190" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em;">l</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-191" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>l</mi><mi>j</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-27">l_j</script>(<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-28-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-192" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-193" class="mjx-mrow"><span id="MJXc-Node-194" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-195" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-196" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-28">n_i</script>)，j=1,2,...m}，<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-29-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-197" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-198" class="mjx-mrow"><span id="MJXc-Node-199" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-200" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em;">l</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-201" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>l</mi><mi>j</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-29">l_j</script>表示<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-30-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-202" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-203" class="mjx-mrow"><span id="MJXc-Node-204" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-205" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-206" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-30">n_i</script>在第j层的祖先，m为树的高度。当用户<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-31-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-207" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-208" class="mjx-mrow"><span id="MJXc-Node-209" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi></math></span></span><script type="math/tex" id="MathJax-Element-31">u</script>对<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-32-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-210" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-211" class="mjx-mrow"><span id="MJXc-Node-212" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-213" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-214" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-32">n_i</script>产生了行为时，我们认为<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-33-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-215" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-216" class="mjx-mrow"><span id="MJXc-Node-217" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-218" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-219" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-33">n_i</script>是用户的一个兴趣，由上我们认为用户<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-34-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-220" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-221" class="mjx-mrow"><span id="MJXc-Node-222" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi></math></span></span><script type="math/tex" id="MathJax-Element-34">u</script>也对路径{<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-35-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-223" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-224" class="mjx-mrow"><span id="MJXc-Node-225" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-226" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em;">l</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-227" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.475em;">j</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>l</mi><mi>j</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-35">l_j</script>(<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-36-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-228" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-229" class="mjx-mrow"><span id="MJXc-Node-230" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-231" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-232" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.423em; padding-bottom: 0.265em;">i</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-36">n_i</script>)，j=1,2,...m}中的各个祖先节点也产生了兴趣，于是我们选择这些节点作为训练的正样本，而根据全局分类器的设计要求，我们对这些正样本节点所在层进行随机采样构成负样本。<br>
具体地，记对于用户<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-37-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-233" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-234" class="mjx-mrow"><span id="MJXc-Node-235" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi></math></span></span><script type="math/tex" id="MathJax-Element-37">u</script>，<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-38-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msubsup&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;Y&lt;/mi&gt;&lt;/mrow&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;/msubsup&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-236" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-237" class="mjx-mrow"><span id="MJXc-Node-238" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.046em;"><span id="MJXc-Node-239" class="mjx-texatom"><span id="MJXc-Node-240" class="mjx-mrow"><span id="MJXc-Node-241" class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.423em; padding-bottom: 0.475em; padding-right: 0.046em;">Y</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.247em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.391em; padding-left: 0.155em; padding-right: 0.071em;"><span id="MJXc-Node-243" class="mjx-mo" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.318em; padding-bottom: 0.423em;">+</span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span id="MJXc-Node-242" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">Y</mi></mrow><mi>u</mi><mo>+</mo></msubsup></math></span></span><script type="math/tex" id="MathJax-Element-38">\mathcal{Y}_u^+</script>为正样本集合，<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-39-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msubsup&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;Y&lt;/mi&gt;&lt;/mrow&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;/msubsup&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-244" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-245" class="mjx-mrow"><span id="MJXc-Node-246" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.046em;"><span id="MJXc-Node-247" class="mjx-texatom"><span id="MJXc-Node-248" class="mjx-mrow"><span id="MJXc-Node-249" class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.423em; padding-bottom: 0.475em; padding-right: 0.046em;">Y</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.247em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.391em; padding-left: 0.155em; padding-right: 0.071em;"><span id="MJXc-Node-251" class="mjx-mo" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.318em; padding-bottom: 0.423em;">−</span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span id="MJXc-Node-250" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">Y</mi></mrow><mi>u</mi><mo>−</mo></msubsup></math></span></span><script type="math/tex" id="MathJax-Element-39">\mathcal{Y}_u^-</script>为负样本集合，我们有如下的似然公式：</p>
<div align="center"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/bf407c56-d416-4891-b9dd-a47a28c0cce4.png"></div>
<p>相对应的，我们有损失函数为：</p>
<div align="center"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/4a95dd97-9380-4a09-abe5-447385860059.png"></div>
<p>其中，<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-40-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-252" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-253" class="mjx-mrow"><span id="MJXc-Node-254" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.006em;"><span id="MJXc-Node-255" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.475em; padding-right: 0.006em;">y</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-256" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span><span id="MJXc-Node-257" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">(</span></span><span id="MJXc-Node-258" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span><span id="MJXc-Node-259" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.475em; padding-bottom: 0.58em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>y</mi><mi>u</mi></msub><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-40">y_u(n)</script>代表用户<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-41-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-260" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-261" class="mjx-mrow"><span id="MJXc-Node-262" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">u</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi></math></span></span><script type="math/tex" id="MathJax-Element-41">u</script>对节点<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-42-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-263" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-264" class="mjx-mrow"><span id="MJXc-Node-265" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-42">n</script>偏好的真实Label（0或1）。<br>
图(1)形象的描述了TDM（带Attention版本）训练时的模型结构，其中树是一棵完全二叉树（但TDM框架本身并不要求树必须是二叉结构）。<br>
在实际的样本构建中，我们采用了用户当天的行为（购买、加购等）叶子节点及其上溯路径上的祖先节点为正样本，而随机采样各个正样本节点的同层兄弟为负样本。在特征上我们使用了(0,8 * 24]小时的行为特征作为用户特征输入。TDM在XDL（详见附录）平台上以Batch形式进行训练。</p>
<h3 id="5"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#5"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二，结果预测</h3>
<p>遵循TDM层次检索的原理，我们只需要从根节点出发，自顶向下依次逐层选取该层候选孩子中最优的K个节点即可。也即我们有层次检索算法：对于最终要求K个叶子目标推荐的情况下，选择当前层概率最高的K个节点，然后往下层扩展他们的孩子节点，对下层孩子节点进行概率估计，选取概率最高的K个，递归计算和选取直至所有路径都到达叶子层，最后从候选叶子集合（可能大于2K个）中取概率最高的K个返回即可。具体的检索逻辑可参考图2的伪代码描述。在TDM的实验中，层次TopK的检索被实验证明是有效的，甚至是优于平层暴力（Brute-force）检索的，这一点也侧面验证了<font color="red">兴趣树的层次结构可以有效促进检索的精度提升</font>，具体的提升效果可参见后文实验效果部分。</p>
<div align="center"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/e084300e-fba1-4764-a6e4-51109436d35c.png"></div>
<p></p><p></p>
<p align="center"> 图2 TopK层次检索算法 </p>
<h3 id="6"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#6"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三，树联合训练</h3>
<p>TDM中的树是支撑高效检索效率的兴趣层次组织的载体，同时树的结构直接决定了层次检索的候选集组成以及模型训练的样本组成，所以树结构的优化与否对TDM模型的性能好坏具有直接影响。在实践中我们发现，基于淘宝商品体系为依托构造的树所得的TDM模型，在离线评估指标（召回率等）上会显著的优于随机构造的树所得的TDM模型，这一结果印证了树结构对TDM的巨大影响。鉴于此，我们尝试建立了树优化学习的方法，同时为了最大程度联合TDM模型训练取得更优效果，我们在这基础上进行了树-模型联合训练的迭代实验，实验结果证明联合训练的模型可以取得比初始模型更优的效果提升（10%+），详细提升可参见后文实验效果部分。具体而言我们建立了如下的联合训练迭代方法：<br>
1）依托淘宝商品体系构造初始化的兴趣层次树<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-43-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-266" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-267" class="mjx-mrow"><span id="MJXc-Node-268" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.12em;"><span id="MJXc-Node-269" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.12em;">T</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-270" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.37em;">0</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-43">T_0</script>；<br>
2）基于<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-44-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-271" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-272" class="mjx-mrow"><span id="MJXc-Node-273" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.12em;"><span id="MJXc-Node-274" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.12em;">T</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-275" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.37em;">0</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-44">T_0</script>构造样本，训练得到TDM模型<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-45-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-276" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-277" class="mjx-mrow"><span id="MJXc-Node-278" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.081em;"><span id="MJXc-Node-279" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.081em;">M</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-280" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">1</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>M</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-45">M_1</script>；<br>
3）根据<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-46-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-281" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-282" class="mjx-mrow"><span id="MJXc-Node-283" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.081em;"><span id="MJXc-Node-284" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.081em;">M</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-285" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">1</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>M</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-46">M_1</script>学得的节点Embedding，通过KMeans聚类重建新树<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-47-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-286" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-287" class="mjx-mrow"><span id="MJXc-Node-288" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.12em;"><span id="MJXc-Node-289" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.12em;">T</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-290" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">1</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-47">T_1</script>；<br>
4）基于<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-48-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-291" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-292" class="mjx-mrow"><span id="MJXc-Node-293" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.12em;"><span id="MJXc-Node-294" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.12em;">T</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-295" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">1</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-48">T_1</script>重新构造样本，训练得到TDM新模型<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-49-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-296" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-297" class="mjx-mrow"><span id="MJXc-Node-298" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.081em;"><span id="MJXc-Node-299" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.081em;">M</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-300" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">2</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>M</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-49">M_2</script>；<br>
5）继续步骤3）和4）直至模型测试指标稳定，得到最终模型<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span id="MathJax-Element-50-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-301" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-302" class="mjx-mrow"><span id="MJXc-Node-303" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.081em;"><span id="MJXc-Node-304" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.081em;">M</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.23em; padding-right: 0.071em;"><span id="MJXc-Node-305" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.475em; padding-right: 0.06em;">f</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>M</mi><mi>f</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-50">M_f</script>。<br>
<strong>需要说明的是，步骤1）中借鉴淘宝商品体系构建初始化树有助于TDM建立较好的树迭代起点。对于一般领域而言，可以采用随机方式构造的树作为初始树的选择。</strong><br>
图3具体展现了树联合训练在离线测试上的效果。</p>
<div align="center"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/c801b8e7-2f09-4ea0-bd1a-d91d11de0fa5.png"></div>
<p></p><p></p>
<p align="center"> 图3 联合训练树模型和初始树模型的测试结果对比 </p>
<h2 id="7"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#7"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16" style="visibility: hidden;"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>V 实验效果</h2>
<p>我们在公开数据集MovieLens和阿里妈妈构建的广告数据集UserBehavior上进行了TDM的实验对比，评价指标包括精度、召回率、精度召回率调和F1和新颖性等方面，对比的方法包括：</p>
<ul>
<li>Item-CF采用的是阿里内部的eTREC实现，</li>
<li>YouTube product-DNN实现的是YouTube视频推荐的向量检索方法（采用和TDM统一的网络结构和特征Embedding维度，负采样只在最底层商品层进行且负样本总个数和TDM保持相等），</li>
<li>基于Attention结构使用（attention-DNN）与否、树节点Embedding是（DNN）否（product-DNN）进入输入层TDM也有多个版本。</li>
</ul>
<h3 id="8"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#8"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一，召回率评估</h3>
<div align="center"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/d11fb7f4-a65f-47e2-b191-73224f50373f.png"></div>
<p></p><p></p>
<p align="center"> 表1 Tree-based Deep Match实验效果对比 </p>
<p>从表1的对比效果中我们可以看出：<br>
1）无论是MovieLens上还是UserBehavior上，带Attention的TDM在召回率上都<font color="red"><strong>显著超越</strong></font>了现有推荐匹配算法，包括YouTube向量检索方法和Item-CF统计规则方法；<br>
2）在基础product-DNN版本上引入更复杂和先进的深度模型（节点Embedding进入输入层和引入Attention）可以进一步<font color="red"><strong>大幅提升</strong></font>召回率。</p>
<h3 id="9"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#9"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二，新颖性评估</h3>
<div class="table-contianer"><table><thead>
<tr>
<th>Method</th><th>Precision</th><th>PrecisionLift</th><th>Recall</th><th>RecallLift</th><th>F1</th><th>F1Lift</th></tr>
</thead><tbody>
<tr>
<td align="left">Item-CF</td><td align="left">0.07%</td><td align="left">+0%</td><td align="left">1.06%</td><td align="left">+0%</td><td align="left">0.13%</td><td align="left">+0%</td></tr>
<tr>
<td align="left">YouTube product-DNN</td><td align="left">0.26%</td><td align="left">+271%</td><td align="left">3.09%</td><td align="left">+192%</td><td align="left">0.45%</td><td align="left">+246%</td></tr>
<tr>
<td align="left">TDM attention-DNN</td><td align="left">0.35%</td><td align="left">+400%</td><td align="left">4.15%</td><td align="left">+292%</td><td align="left">0.60%</td><td align="left">+362%</td></tr>
<tr>
<td align="left">Learnt Tree TDM attention-DNN</td><td align="left">0.40%</td><td align="left">+471%</td><td align="left">4.82%</td><td align="left">+355%</td><td align="left">0.69%</td><td align="left">+431%</td></tr>
</tbody></table></div>
<p align="center"> 表2 Tree-based Deep Match在新颖类目上的效果 </p>
<p>在淘宝场景内，类目级别的新颖效果也是非常重要的关注指标，我们对各个模型的推荐结果做了行为过的类目的过滤，并对过滤后的结果进行了Precision、Recall、F1等的对比（如表2）。从中可以看到，attention-DNN的TDM方案在全部的指标上都有极大提升，包括相对于集团主流使用的Item-CF方案召回率提升292%，相对于业界主流YouTube方案召回率提升34%，而经过树联合训练后Learnt Tree TDM方案效果进一步提升，包括相对于集团主流使用的Item-CF方案召回率提升355%，相对于业界主流YouTube方案召回率提升56%。指标的提升极大的说明了<font color="red">TDM方案在类目级别的新颖结果上有很好的表现，并从侧面验证了树-模型联合学习对效果的巨大提升</font>。</p>
<h3 id="10"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#10"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三，树结构对效果的促进</h3>
<div align="center"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/4a8d58f8-1c36-4fee-840c-52f0b2d5f2db.png"></div>
<p></p><p></p>
<p align="center"> 图4 树检索和暴力检索在每一层上的召回率对比 </p>
<p>我们知道TDM中的树作为检索的载体具有良好的时间复杂性，极大赋能了单点的复杂计算。而树本身就是兴趣层次结构，它将推荐匹配的大问题切割成多个层次化的全局分类小问题递归求解。在实验中我们发现树的这种层次化结构可以更加促进效果的提升。从图4我们可以看到在<font color="red">树层数达到一定高度（9+）后TopK层次检索方法（图2）在召回率上会显著优于在该层上的暴力检索方法</font>。究其原因，我们认为TDM的层次化树检索有效防止了上层差的节点对下层节点序计算的影响，将下层候选圈定在上层好的（TopK）节点的孩子中，相对于暴力检索大大降低了序计算的难度，使其具有更好的分类能力，实现召回效果的提升。</p>
<h2 id="11"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#11"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>VI 总结与展望</h2>
<h3 id="12"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#12"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一，总结</h3>
<p>Tree-based Deep Match（TDM）自主创新提出了一套完整的基于树的复杂深度学习推荐匹配算法框架，它通过建立用户兴趣层次树结构实现了高效的全库检索，并以此为基础赋能深度模型引入Attention等更先进的计算结构，达到了在精度、召回率以及新颖性等指标上相对于传统推荐方法的显著效果提升。进一步的，TDM设计实现了一套完整的 初始树-模型训练-树重建-模型再训练 的联合训练迭代框架，更加促进了效果的提升。联合训练赋予了TDM算法框架较好的通用性，为TDM向新场景、新领域的迁移扩展提供了良好的理论基础和极大的工程可行性。<br>
<font color="red">由阿里自主创新提出的这套TDM框架是对学术界和工业界关于匹配和推荐理论技术发展的一次重大促进，它为解决匹配问题提出了一套崭新的、完整的支持任意深度学习的树状全库检索方案，取得了算法效果的巨大提升，并为广泛的行业、领域迁移提供了极大的可行性。</font></p>
<h3 id="13"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#13"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二，展望</h3>
<p>TDM建立了一套完整的基于树结构的深度学习推荐匹配理论和技术，并在广告领域取得了初步的成果和进展。但相对来说还处于开端阶段，后续还有较多可改进的地方，比如在树学习方法上TDM暂时采用的是无监督学习的KMeans聚类，未来可以考虑采用有监督的方式对树进行调枝、剪枝等调整来实现树结构的进一步优化。</p>
<h2 id="14"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#14"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>VII 感谢</h2>
<p>Tree-based Deep Match项目从最初的原创想法迸发，到中间的各种方案尝试，到现在的完整模型理论和技术框架建立，历经了非常多的困难，也走了不少弯路、险路。能顺利抵达彼岸，确须贵在坚持，正道是“千淘万漉虽心苦，吹尽狂沙始到金”。TDM的建立和效果取得倾注了所有参与者的心血和汗水，在此一并感谢：</p>
<ul>
<li>项目组：凌业，颀木，谨持，羽轼，壶源，探微</li>
<li>算法协助：霁光，庙算，乞颜</li>
<li>引擎：海乐</li>
<li>离线和实时数据流：天步，欧深，扶翼</li>
<li>测试：欣洋</li>
<li>XDL算法平台：须焰，垂翁，尺寒，沅凯</li>
<li>PE：城诀，彼辰</li>
</ul>
<p>的辛苦付出和鼎力支持， 同时也感谢 腾冥，尚峰，探微，玺羽，道济，靖世 的指导和大力支持。</p>
<p>（排名不分先后）</p>
<p>PS: 项目组也对TDM进行了系统总结并撰写成了论文《Learning Tree-based Deep Model for Recommender Systems》，本月初喜获SIGKDD2018国际会议的收录。论文附件贴于文尾，请大家不吝指正！</p>
<h2 id="15"><a target="_self" class="article-anchor" href="https://www.atatech.org/articles/102403#15"><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>VIII 附录</h2>
<p>1，XDL：<a href="https://www.atatech.org/articles/95643">https://www.atatech.org/articles/95643</a></p>
<p>2，MLR：<a href="https://www.atatech.org/articles/78579">https://www.atatech.org/articles/78579</a></p>
<p>3，DIN：<a href="https://arxiv.org/abs/1706.06978">https://arxiv.org/abs/1706.06978</a></p>

                      </div>

                                                                              <div class="attachment"><iframe id="preview_41094" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/viewDoc.html" frameborder="0" width="100%" height="500"></iframe>
                <a href="https://www.atatech.org/download?file[]=65eae04e725223b9fa5bd2ff0ce24b8f%2FKDD2018-TDM.pdf">
                  <span class="glyphicon glyphicon-paperclip"></span>
                  KDD2018-TDM.pdf
                </a>

                                  <a href="javascript:void(0);" target="_self" class="attach_preview label label-success preview_open" attach-id="17295" data-id="41094" data-url="https://docs.cts.t.taobao.com/viewDoc?viewToken=03682282C6D848DD62603298C4666C6A">关闭预览</a>
                              <a target="_blank" class="label label-success preview-all" href="https://www.atatech.org/preview?attaId=17295">全屏预览</a></div>
                      
          <div class="_article-float hidden-xs" data-fixed="false">
            <div class="container">
              <div class="_article-float-inner">
                <aside class="_article-side">
    <a href="https://www.atatech.org/articles/102403/follow" class="btn btn-primary btn-block" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).parent().replaceWith(r)">关注</a>
    <section class="_article-followers">
    <h6 class="heading text-center">38人关注该文章</h6>
    <ul class="list-inline">
      <li><a href="https://www.atatech.org/users/287844" class="trigger_avatar" avatar="https://work.alibaba-inc.com/photo/134626.80x80.jpg">丁复</a></li><li><a href="https://www.atatech.org/users/475645" class="trigger_avatar" avatar="https://work.alibaba-inc.com/photo/174466.80x80.jpg">三帅</a></li><li><a href="https://www.atatech.org/users/30753" class="trigger_avatar" avatar="https://work.alibaba-inc.com/photo/061118.80x80.jpg">王刚</a></li><li><a href="https://www.atatech.org/users/146795" class="trigger_avatar" avatar="https://work.alibaba-inc.com/photo/100991.80x80.jpg">锐盈</a></li><li><a href="https://www.atatech.org/users/385984" class="trigger_avatar" avatar="https://work.alibaba-inc.com/photo/152948.80x80.jpg">雨话</a></li><li><a href="https://www.atatech.org/users/204549" class="trigger_avatar" avatar="https://work.alibaba-inc.com/photo/112060.80x80.jpg">夏豆</a></li><li><a href="https://www.atatech.org/users/25149" class="trigger_avatar" avatar="https://work.alibaba-inc.com/photo/062774.80x80.jpg">玉蜂</a></li><li><a href="https://www.atatech.org/users/130076" class="trigger_avatar" avatar="https://work.alibaba-inc.com/photo/086613.80x80.jpg">锡伦</a></li><li><a data-toggle="modal" href="https://www.atatech.org/articles/102403/followers" data-target="#modal-followers" title="查看全部"><div class="img-user img-user-more text-center" style="width:26px;height:26px">...</div></a></li>    </ul>
  </section>
</aside>
              </div>
            </div>
          </div>

          <footer class="actions">
            <a href="https://www.atatech.org/articles/102403#comment" class="btn btn-primary js-scroll-to">评论文章
                              (14)
                          </a>
            <a href="https://www.atatech.org/articles/102403/voteup" title="赞" class="btn btn-default" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).next().addBack().toggle();$(&#39;#voters&#39;).html(r)">
              <span class="glyphicon glyphicon-thumbs-up"></span>
              90
            </a>
            <a href="https://www.atatech.org/articles/102403/unvoteup" title="取消赞" class="btn btn-primary" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).prev().addBack().toggle();$(&#39;#voters&#39;).html(r)" style="display:none">
              <span class="glyphicon glyphicon-thumbs-up"></span>
              91
            </a>
                          <button class="btn btn-default" data-toggle="modal" data-target="#modal-share" data-article-id="102403" data-share-count-target="#share-count" title="分享">
                <span class="glyphicon glyphicon-share"></span>
                <span id="share-count">0</span>
              </button>
            
            <!-- 分享到内外工作圈 -->
            <button class="btn btn-default" data-toggle="modal" data-target="#modal-aliwork-share" data-article-id="102403" title="分享到内外工作圈">
              <span class="glyphicon glyphicon-share-alt"></span>
            </button>

            <!-- 收藏 -->
            <span id="tools_favor_footer">
                  <a data-toggle="modal" href="https://www.atatech.org/articles/102403/mark/" data-target="#my-mark-modal" title="收藏" class="btn btn-default item-tomark" role="button" rel="nofollow" style="display:none">
                    179&nbsp;<span>收藏</span>
                  </a>
                  <a href="https://www.atatech.org/articles/102403/unmark" title="取消收藏" class="btn btn-primary item-tounmark" role="button" rel="nofollow" data-remote="true" data-done="$(this).prev().addBack().toggle()" data-method="post">
                    180&nbsp;<span>取消收藏</span>
                  </a>
                </span>
          </footer>
        </article>

        <hr>


        <div id="voters" js-load-url="/articles/102403/voters"><div id="voters" class="_article-voters">
  <h3 class="heading">他们赞过该文章</h3>
  <ul class="list-inline"><li><a href="https://www.atatech.org/users/2248" class="trigger_avatar" avatar="/users/2248/avatar/?size=50">别离</a></li><li><a href="https://www.atatech.org/users/7541" class="trigger_avatar" avatar="/users/7541/avatar/?size=50">释然</a></li><li><a href="https://www.atatech.org/users/9179" class="trigger_avatar" avatar="/users/9179/avatar/?size=50">迦若</a></li><li><a href="https://www.atatech.org/users/9265" class="trigger_avatar" avatar="/users/9265/avatar/?size=50">鲁尼</a></li><li><a href="https://www.atatech.org/users/19132" class="trigger_avatar" avatar="/users/19132/avatar/?size=50">尚峰</a></li><li><a href="https://www.atatech.org/users/19139" class="trigger_avatar" avatar="/users/19139/avatar/?size=50">铁衣</a></li><li><a href="https://www.atatech.org/users/19732" class="trigger_avatar" avatar="/users/19732/avatar/?size=50">师允</a></li><li><a href="https://www.atatech.org/users/19742" class="trigger_avatar" avatar="/users/19742/avatar/?size=50">玄木</a></li><li><a href="https://www.atatech.org/users/20017" class="trigger_avatar" avatar="/users/20017/avatar/?size=50">昆卡</a></li><li><a href="https://www.atatech.org/users/20786" class="trigger_avatar" avatar="/users/20786/avatar/?size=50">仲宁</a></li><li><a href="https://www.atatech.org/users/21598" class="trigger_avatar" avatar="/users/21598/avatar/?size=50">权健</a></li><li><a href="https://www.atatech.org/users/22738" class="trigger_avatar" avatar="/users/22738/avatar/?size=50">杨焜</a></li><li><a href="https://www.atatech.org/users/24652" class="trigger_avatar" avatar="/users/24652/avatar/?size=50">彧卿</a></li><li><a href="https://www.atatech.org/users/25149" class="trigger_avatar" avatar="/users/25149/avatar/?size=50">玉蜂</a></li><li><a href="https://www.atatech.org/users/28626" class="trigger_avatar" avatar="/users/28626/avatar/?size=50">穆轩</a></li><li><a href="https://www.atatech.org/users/31355" class="trigger_avatar" avatar="/users/31355/avatar/?size=50">玄乐</a></li><li><a href="https://www.atatech.org/users/34562" class="trigger_avatar" avatar="/users/34562/avatar/?size=50">天民</a></li><li><a href="https://www.atatech.org/users/65025" class="trigger_avatar" avatar="/users/65025/avatar/?size=50">刑志</a></li><li><a href="https://www.atatech.org/users/65512" class="trigger_avatar" avatar="/users/65512/avatar/?size=50">上卿</a></li><li><a href="https://www.atatech.org/users/66754" class="trigger_avatar" avatar="/users/66754/avatar/?size=50">随空</a></li><li><a href="https://www.atatech.org/users/67257" class="trigger_avatar" avatar="/users/67257/avatar/?size=50">君之</a></li><li><a href="https://www.atatech.org/users/67823" class="trigger_avatar" avatar="/users/67823/avatar/?size=50">巴滕</a></li><li><a href="https://www.atatech.org/users/69795" class="trigger_avatar" avatar="/users/69795/avatar/?size=50">胡默</a></li><li><a href="https://www.atatech.org/users/70089" class="trigger_avatar" avatar="/users/70089/avatar/?size=50">口肃</a></li><li><a href="https://www.atatech.org/users/72657" class="trigger_avatar" avatar="/users/72657/avatar/?size=50">怀人</a></li><li><a href="https://www.atatech.org/users/74537" class="trigger_avatar" avatar="/users/74537/avatar/?size=50">清璃</a></li><li><a href="https://www.atatech.org/users/75768" class="trigger_avatar" avatar="/users/75768/avatar/?size=50">彼辰</a></li><li><a href="https://www.atatech.org/users/76023" class="trigger_avatar" avatar="/users/76023/avatar/?size=50">元满</a></li><li><a href="https://www.atatech.org/users/76597" class="trigger_avatar" avatar="/users/76597/avatar/?size=50">浩宸</a></li><li><a href="https://www.atatech.org/users/79653" class="trigger_avatar" avatar="/users/79653/avatar/?size=50">拓马</a></li><li><a href="https://www.atatech.org/users/80602" class="trigger_avatar" avatar="/users/80602/avatar/?size=50">庙算</a></li><li><a href="https://www.atatech.org/users/81355" class="trigger_avatar" avatar="/users/81355/avatar/?size=50">灵姝</a></li><li><a href="https://www.atatech.org/users/82205" class="trigger_avatar" avatar="/users/82205/avatar/?size=50">宵夙</a></li><li><a href="https://www.atatech.org/users/82330" class="trigger_avatar" avatar="/users/82330/avatar/?size=50">士铎</a></li><li><a href="https://www.atatech.org/users/92102" class="trigger_avatar" avatar="/users/92102/avatar/?size=50">筱初</a></li><li><a href="https://www.atatech.org/users/92316" class="trigger_avatar" avatar="/users/92316/avatar/?size=50">积流</a></li><li><a href="https://www.atatech.org/users/93474" class="trigger_avatar" avatar="/users/93474/avatar/?size=50">腾冥</a></li><li><a href="https://www.atatech.org/users/106121" class="trigger_avatar" avatar="/users/106121/avatar/?size=50">九谦</a></li><li><a href="https://www.atatech.org/users/116600" class="trigger_avatar" avatar="/users/116600/avatar/?size=50">清骞</a></li><li><a href="https://www.atatech.org/users/120038" class="trigger_avatar" avatar="/users/120038/avatar/?size=50">曦澈</a></li><li><a href="https://www.atatech.org/users/120122" class="trigger_avatar" avatar="/users/120122/avatar/?size=50">良正</a></li><li><a href="https://www.atatech.org/users/120912" class="trigger_avatar" avatar="/users/120912/avatar/?size=50">YANG, Sen</a></li><li><a href="https://www.atatech.org/users/121359" class="trigger_avatar" avatar="/users/121359/avatar/?size=50">天步</a></li><li><a href="https://www.atatech.org/users/121407" class="trigger_avatar" avatar="/users/121407/avatar/?size=50">崧扬</a></li><li><a href="https://www.atatech.org/users/124489" class="trigger_avatar" avatar="/users/124489/avatar/?size=50">欣洋</a></li><li><a href="https://www.atatech.org/users/124945" class="trigger_avatar" avatar="/users/124945/avatar/?size=50">遇乐</a></li><li><a href="https://www.atatech.org/users/131926" class="trigger_avatar" avatar="/users/131926/avatar/?size=50">王俊杰</a></li><li><a href="https://www.atatech.org/users/132198" class="trigger_avatar" avatar="/users/132198/avatar/?size=50">千哩</a></li><li><a href="https://www.atatech.org/users/133435" class="trigger_avatar" avatar="/users/133435/avatar/?size=50">颀木</a></li><li><a href="https://www.atatech.org/users/139589" class="trigger_avatar" avatar="/users/139589/avatar/?size=50">晨尖</a></li><li><a href="https://www.atatech.org/users/141389" class="trigger_avatar" avatar="/users/141389/avatar/?size=50">艾耳</a></li><li><a href="https://www.atatech.org/users/143974" class="trigger_avatar" avatar="/users/143974/avatar/?size=50">逐水</a></li><li><a href="https://www.atatech.org/users/146795" class="trigger_avatar" avatar="/users/146795/avatar/?size=50">锐盈</a></li><li><a href="https://www.atatech.org/users/150227" class="trigger_avatar" avatar="/users/150227/avatar/?size=50">凌运</a></li><li><a href="https://www.atatech.org/users/150355" class="trigger_avatar" avatar="/users/150355/avatar/?size=50">略微</a></li><li><a href="https://www.atatech.org/users/151712" class="trigger_avatar" avatar="/users/151712/avatar/?size=50">魔彧</a></li><li><a href="https://www.atatech.org/users/160966" class="trigger_avatar" avatar="/users/160966/avatar/?size=50">旭廷</a></li><li><a href="https://www.atatech.org/users/168420" class="trigger_avatar" avatar="/users/168420/avatar/?size=50">辉皇</a></li><li><a href="https://www.atatech.org/users/179730" class="trigger_avatar" avatar="/users/179730/avatar/?size=50">黄佳灿</a></li><li><a href="https://www.atatech.org/users/196774" class="trigger_avatar" avatar="/users/196774/avatar/?size=50">玄深</a></li><li><a href="https://www.atatech.org/users/202870" class="trigger_avatar" avatar="/users/202870/avatar/?size=50">凌业</a></li><li><a href="https://www.atatech.org/users/205938" class="trigger_avatar" avatar="/users/205938/avatar/?size=50">迷榖</a></li><li><a href="https://www.atatech.org/users/207023" class="trigger_avatar" avatar="/users/207023/avatar/?size=50">林霁</a></li><li><a href="https://www.atatech.org/users/208369" class="trigger_avatar" avatar="/users/208369/avatar/?size=50">谨持</a></li><li><a href="https://www.atatech.org/users/208370" class="trigger_avatar" avatar="/users/208370/avatar/?size=50">得豆</a></li><li><a href="https://www.atatech.org/users/222724" class="trigger_avatar" avatar="/users/222724/avatar/?size=50">斐多</a></li><li><a href="https://www.atatech.org/users/224993" class="trigger_avatar" avatar="/users/224993/avatar/?size=50">楠易</a></li><li><a href="https://www.atatech.org/users/230634" class="trigger_avatar" avatar="/users/230634/avatar/?size=50">飞猹</a></li><li><a href="https://www.atatech.org/users/234405" class="trigger_avatar" avatar="/users/234405/avatar/?size=50">扶翼</a></li><li><a href="https://www.atatech.org/users/234646" class="trigger_avatar" avatar="/users/234646/avatar/?size=50">汉臣</a></li><li><a href="https://www.atatech.org/users/236854" class="trigger_avatar" avatar="/users/236854/avatar/?size=50">加莱</a></li><li><a href="https://www.atatech.org/users/251050" class="trigger_avatar" avatar="/users/251050/avatar/?size=50">诚立</a></li><li><a href="https://www.atatech.org/users/252155" class="trigger_avatar" avatar="/users/252155/avatar/?size=50">行湘</a></li><li><a href="https://www.atatech.org/users/257332" class="trigger_avatar" avatar="/users/257332/avatar/?size=50">麟菩</a></li><li><a href="https://www.atatech.org/users/277889" class="trigger_avatar" avatar="/users/277889/avatar/?size=50">宙一</a></li><li><a href="https://www.atatech.org/users/287844" class="trigger_avatar" avatar="/users/287844/avatar/?size=50">丁复</a></li><li><a href="https://www.atatech.org/users/290313" class="trigger_avatar" avatar="/users/290313/avatar/?size=50">培成</a></li><li><a href="https://www.atatech.org/users/293101" class="trigger_avatar" avatar="/users/293101/avatar/?size=50">艾奥</a></li><li><a href="https://www.atatech.org/users/297517" class="trigger_avatar" avatar="/users/297517/avatar/?size=50">阿萧</a></li><li><a href="https://www.atatech.org/users/298704" class="trigger_avatar" avatar="/users/298704/avatar/?size=50">朴致</a></li><li><a href="https://www.atatech.org/users/310584" class="trigger_avatar" avatar="/users/310584/avatar/?size=50">丑木</a></li><li><a href="https://www.atatech.org/users/322001" class="trigger_avatar" avatar="/users/322001/avatar/?size=50">胜曦</a></li><li><a href="https://www.atatech.org/users/324941" class="trigger_avatar" avatar="/users/324941/avatar/?size=50">破泞</a></li><li><a href="https://www.atatech.org/users/326150" class="trigger_avatar" avatar="/users/326150/avatar/?size=50">归是</a></li><li><a href="https://www.atatech.org/users/328541" class="trigger_avatar" avatar="/users/328541/avatar/?size=50">咖椰</a></li><li><a href="https://www.atatech.org/users/331993" class="trigger_avatar" avatar="/users/331993/avatar/?size=50">随方</a></li><li><a href="https://www.atatech.org/users/339404" class="trigger_avatar" avatar="/users/339404/avatar/?size=50">嘉成</a></li><li><a href="https://www.atatech.org/users/368647" class="trigger_avatar" avatar="/users/368647/avatar/?size=50">盖伯</a></li><li><a href="https://www.atatech.org/users/405709" class="trigger_avatar" avatar="/users/405709/avatar/?size=50">楠岩</a></li><li><a href="https://www.atatech.org/users/413094" class="trigger_avatar" avatar="/users/413094/avatar/?size=50">逸峯</a></li></ul></div>
<hr>
</div>

                <div js-load-url="/articles/102403/similar">  <table width="100%" class="cnzz_block" id="article-recommend" cnzz_event="相似文章">
    <tbody><tr>
      <th rowspan="3" width="5%">相<br>似<br>文<br>章</th>
      <td width="50%">
        <li><a href="https://www.atatech.org/articles/38677">智能非线性学习--混合逻辑回归MLR和大...</a></li>
      </td>
      <td width="45%">
        <li><a href="https://www.atatech.org/articles/78579">阿里妈妈论文披露自主研发的CTR预估核心...</a></li>
      </td>
    </tr>
          <tr>
        <td>
          <li><a href="https://www.atatech.org/articles/82163">智能生成规则——决策树模型的最佳实践 |...</a></li>
        </td>
        <td>
          <li><a href="https://www.atatech.org/articles/94208">DeepMatch—深度智能召回模型在手...</a></li>
        </td>
      </tr>
          <tr>
        <td>
          <li><a href="https://www.atatech.org/articles/95305">智能写手第二弹——智能文本生成在2017...</a></li>
        </td>
        <td>
          <li><a href="https://www.atatech.org/articles/95511">从AlphaGo到金融营销: 深度强化学...</a></li>
        </td>
      </tr>
      </tbody></table>
</div>

                  <ul class="pager _article-pager">
                          <li class="previous cnzz_block" cnzz_event="上一篇"><a href="https://www.atatech.org/articles/98528">上一篇：精准定向广告中的Tree-based Deep Match技术</a></li>
                                  </ul>
          <hr>
        
                  <section class="comments-box clearfix">
            <div class="media-list comments" id="comments" js-load-url="/articles/102403/comments">
<div class="comment media gaze in" id="comment-166190">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        1F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/15130" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/041470.80x80.jpg">肖荣</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-166190" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-03-14T15:29:10+08:00">2018-03-14 15:29:10</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>有几个问题请教下哈：<br>
(1) node embedding就是直接用树节点的id embedding吗<br>
(2) 每一层会建立一个全局的分类器，最后一层的叶子节点就是商品吧， 这一层是怎么设计的<br>
(3) 另外有没有一些树的深度，商品量，模型复杂度与latency的对比数据</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/166190/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/166190/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-166190&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-166190">1</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-166190">
      <div class="sub-comments media-list" id="comment-166190-sub">

<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-14T19:01:23+08:00">2018-03-14 19:01:23</time>
    </div>

    <div class="content unsafe md">
      <p>感谢提问~<br>
回答如下：<br>
（1）是的。<br>
（2）最后一层叶子节点是商品。不太明白"怎么设计"具体指哪方面。如果是指模型方面，网络参数是所有层共享的，训练上叶子与非叶子没有区别；如果是指树结构方面，树的初始化在arXiv论文中有描述：我们首先将所有的商品按照叶子类目排好序（类目内的序随机），然后采用递归的二等分方式构建二叉树，从而让相同类目的商品尽量在树上相近的位置，而后采用联合训练的方式进行树结构的优化迭代。<br>
（3）TDM模型在理论上限制了检索次数的复杂度上限为 O(K*log（候选集规模）)。离线实验中我们的商品集规模是400万，树接近完全二叉，所以深度大概在23层左右。在线这块我们正在稳步推进工程上线，届时会再同步一下实际的商品量、树深度和Latency等相关信息。<br>
欢迎大家多提问多交流~</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/166190/subcomments/52446/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/166190/subcomments/52446/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-52446&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-52446" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/166190/subcomments/" method="POST" data-remote="true" data-target="#comment-166190-sub" data-done="$(&#39;#sub-comments-count-166190&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>

  

</div>


<form target="_self" action="https://www.atatech.org/comments/166190/subcomments/" method="POST" data-remote="true" data-target="#comment-166190-sub" data-done="$(&#39;#sub-comments-count-166190&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-166246">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        2F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/240913" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/122034.80x80.jpg">逸初</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-166246" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-03-14T19:22:28+08:00">2018-03-14 19:22:28</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>mark 先占个位</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/166246/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/166246/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-166246&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-166246">0</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-166246" style="display:none">
      <div class="sub-comments media-list" id="comment-166246-sub">


  

</div>


<form target="_self" action="https://www.atatech.org/comments/166246/subcomments/" method="POST" data-remote="true" data-target="#comment-166246-sub" data-done="$(&#39;#sub-comments-count-166246&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-166885">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        3F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/120912" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/071986.80x80.jpg">YANG, Sen</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-166885" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-03-19T16:08:37+08:00">2018-03-19 16:08:37</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>👍</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/166885/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/166885/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-166885&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-166885">0</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-166885" style="display:none">
      <div class="sub-comments media-list" id="comment-166885-sub">


  

</div>


<form target="_self" action="https://www.atatech.org/comments/166885/subcomments/" method="POST" data-remote="true" data-target="#comment-166885-sub" data-done="$(&#39;#sub-comments-count-166885&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-166923">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        4F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/141389" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/089878.80x80.jpg">艾耳</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-166923" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-03-19T19:58:40+08:00">2018-03-19 19:58:40</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>有没有比较过用淘宝商品体系构建初始化树联合训练，比随机方式初始树联合训练，有多大的优势呢？</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/166923/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/166923/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-166923&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-166923">1</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-166923">
      <div class="sub-comments media-list" id="comment-166923-sub">

<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-20T10:24:54+08:00">2018-03-20 10:24:54</time>
    </div>

    <div class="content unsafe md">
      <p>我们对比过：用淘宝商品体系做树的初始化VS树的随机初始化 在TDM上的Recall差异可以达到30%~40%，效果的明显对比也促使我们继续探索和提出了树学习方法和树-模型联合训练的完整方案。<br>
在树联合训练方式下对比淘宝初始化和随机初始化我们暂时没有做过，但从理论上分析，两者主要在树起点不同，在联合训练的不断迭代优化下，应该最终会趋向于相近的最优模型结果，只是后者的迭代时间可能会更长一些。</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/166923/subcomments/52662/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <a href="https://www.atatech.org/comments/166923/subcomments/52662/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        2
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-52662&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-52662" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/166923/subcomments/" method="POST" data-remote="true" data-target="#comment-166923-sub" data-done="$(&#39;#sub-comments-count-166923&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>

  

</div>


<form target="_self" action="https://www.atatech.org/comments/166923/subcomments/" method="POST" data-remote="true" data-target="#comment-166923-sub" data-done="$(&#39;#sub-comments-count-166923&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-167283">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        5F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/251050" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/123445.80x80.jpg">诚立</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-167283" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-03-21T14:28:30+08:00">2018-03-21 14:28:30</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>先赞一个！<br>
作者之前发过的那篇Tree-based Deep Match，应该是用概率连乘树的方式实现的吧，这个树结构相比起那个的改进是保证能取到全局top K吗？有没有对比过效果提升呢？</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/167283/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/167283/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-167283&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-167283">1</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-167283">
      <div class="sub-comments media-list" id="comment-167283-sub">

<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-22T10:51:59+08:00">2018-03-22 10:51:59</time>
    </div>

    <div class="content unsafe md">
      <p>感谢提问。<br>
回答如下：<br>
是的，如文中所述我们最早尝试的方案是概率连乘的形式，但后来我们发现这种建模对于TopK推荐匹配并不能很好的适配。我们提出的兴趣最大堆树和逐层全局分类器改变了问题建模的视角，通过兴趣层次切分和逐层兴趣圈选将一个推荐的大问题转化成一系列层次相依的分类小问题，从而提高了匹配的效果。“取到全局TopK”是我们的目标，新方法使得我们朝这个方向更加迈进了一大步。当然树结构的设计，包括树的联合训练优化，是新方法的重要组成部分，也极大的支撑和促进了效果提升。新方法相对于概率连乘树方法的效果对比可具体参考文尾的arXiv论文，里面有详细的精度、召回率等方面的对比结果。<br>
欢迎多多交流~</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/167283/subcomments/52737/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <a href="https://www.atatech.org/comments/167283/subcomments/52737/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        2
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-52737&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-52737" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/167283/subcomments/" method="POST" data-remote="true" data-target="#comment-167283-sub" data-done="$(&#39;#sub-comments-count-167283&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>

  

</div>


<form target="_self" action="https://www.atatech.org/comments/167283/subcomments/" method="POST" data-remote="true" data-target="#comment-167283-sub" data-done="$(&#39;#sub-comments-count-167283&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-167339">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        6F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/298704" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/136528.80x80.jpg">朴致</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-167339" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-03-21T18:37:00+08:00">2018-03-21 18:37:00</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>赞！我提个问题，这种分层的采样训练，是怎样保证上层和下层的模型，能保持最大堆树的性质的？就是上层的得分和下层的最大得分成正比？有什么理论上的保证么？</p>

    </div>
    
        <div class="voters voters-p">
  <span>空度</span>    <span>赞同</span>
  </div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/167339/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <a href="https://www.atatech.org/comments/167339/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        2
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-167339&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-167339">7</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-167339">
      <div class="sub-comments media-list" id="comment-167339-sub">

<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/338017" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/144746.80x80.jpg">空度</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-21T18:51:19+08:00">2018-03-21 18:51:19</time>
    </div>

    <div class="content unsafe md">
      <p>搭车同问</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/167339/subcomments/52714/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/167339/subcomments/52714/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-52714&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-52714" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/167339/subcomments/" method="POST" data-remote="true" data-target="#comment-167339-sub" data-done="$(&#39;#sub-comments-count-167339&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@空度 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>
<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-22T14:13:07+08:00">2018-03-22 14:13:07</time>
    </div>

    <div class="content unsafe md">
      <p>感谢提问。这是个好问题！<br>
最大堆树是我们为了解决TopK推荐匹配问题提出的一个方法论概念。有了叶子兴趣和最大堆公式，我们可以构建出最大堆树，而基于最大堆树和（特定）用户的叶子兴趣分布，我们可以将兴趣偏好这个问题转化成树每个层次上的序排列问题，有了序的建模，对于用户TopK推荐匹配问题，我们就可以采用自顶向下层次检索的方式来具体解决。对于TopK推荐匹配来说，满足序关系的树就已经达到解决问题的要求了，所以我们的采样和训练都只是围绕这一需求展开的。在这种采样训练方式下，我们生成的树保证了序关系，可以认为是一棵简化的“最大堆树”，它保证了上下层序关系的传递，但没有保证上下层序值的传递。<br>
当然有人可能会提出，理论建模的时候直接建立“保证上下层序关系传递”性质的树不就可以了吗？粗看貌似可以，但仔细推敲其实存在问题：首先，假设建模时我们提出的是保证上下层序关系传递性质的树，那么在指导上下层序采样时会发生理论上的冲突：比如有p1节点的孩子c1和c2节点，p2节点的孩子c3和c4节点，假定P(c1|u) &gt; P(c3|u)，根据序关系传递，我们有P(p1|u) &gt; P(p2|u)，但此时如果P(c2|u) &lt; P(c4|u)，就会导致P(p1|u) &lt; P(p2|u)，这种冲突对我们的建模理论提出了挑战，也即“保证上下层序关系传递”成立并不容易，它对节点（包括叶子）的排列组合提出了要求。而最大堆树的建模方法，保证了抽象的树上不会产生此类冲突，也即它一定可以保证“上下层序关系传递”这一性质，从而从理论上保证了后续基于序的采样、训练、检索的正确性；其次，这种方式并不是抽象指导具象的方法论思路，更多的是从实际操作反向推导，而这种推导往往与实际的操作方法（如采样训练等）紧密耦合。相反的，最大堆树从方法论视角提出了一种抽象，来指导和帮助实践解决TopK推荐匹配问题（包括具体的采样、训练、检索等）。虽然在具体的采样训练方式下得到的树只是逼近了最大堆树（只保证了序关系），但这不妨碍最大堆树作为方法论概念从理论的高度来指导具体实践。<br>
希望上述几点回答了这个问题，并促进了大家对最大堆树这一方法论概念的理解。<br>
欢迎大家更多交流更多沟通！</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/167339/subcomments/52749/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/167339/subcomments/52749/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-52749&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-52749" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/167339/subcomments/" method="POST" data-remote="true" data-target="#comment-167339-sub" data-done="$(&#39;#sub-comments-count-167339&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>
<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/298704" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/136528.80x80.jpg">朴致</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-22T17:48:49+08:00">2018-03-22 17:48:49</time>
    </div>

    <div class="content unsafe md">
      <p>感谢回复哈，大体思路明白了。所以说，这种分层的保序性的方案，是在树已经确定的情况下进行的，对吧。这样的话，后续可能还可以研究下树本身的结构对效率的影响哈，有可能可以预先针对采样的叶子节点先进行预训练，之后建立对应的合理树结构，在做现在的学习，可以提升效率也说不定哈，哈哈，我也是瞎猜的，不一定好用。很棒的工作，赞一个。  </p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/167339/subcomments/52761/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/167339/subcomments/52761/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-52761&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-52761" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/167339/subcomments/" method="POST" data-remote="true" data-target="#comment-167339-sub" data-done="$(&#39;#sub-comments-count-167339&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@朴致 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>
<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-23T22:29:08+08:00">2018-03-23 22:29:08</time>
    </div>

    <div class="content unsafe md">
      <p>赞~<br>
树结构对效果的影响确实很大，在4F给艾耳的回复中也有提及。树-模型联合训练框架也正是受此启发而提出，实验结果（表2）也侧面印证了这一点。<br>
预训练是个不错的想法，其实我们在早期的方案中也有过这方面的尝试，包括提前训练叶子的Embedding然后基于此进行树的构建，但当时观察到的离线实验的效果（Precision&amp;Recall）提升不大。而现在因为建立了树-模型联合训练框架，所以树的初始化对于最终最优模型的效果影响可能会被进一步减弱（或消弭），更多的收益可能会体现在最优模型的快速收敛上。当然实践是检验理论的最好标准，后续我们也会再综合考虑和尝试 预训练+联合训练 的方法。多谢建议！<br>
在阿里，大家的工作都很棒！互相学习！希望未来有机会交流合作！<br>
也欢迎大家更多的提问和交流~</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/167339/subcomments/52830/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/167339/subcomments/52830/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-52830&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-52830" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/167339/subcomments/" method="POST" data-remote="true" data-target="#comment-167339-sub" data-done="$(&#39;#sub-comments-count-167339&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>
<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/298704" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/136528.80x80.jpg">朴致</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-28T17:15:36+08:00">2018-03-28 17:15:36</time>
    </div>

    <div class="content unsafe md">
      <p>赞，再问个问题，树-模型联合训练的过程中，基于节点的node embedding和叶子的item embedding做聚类的具体过程是什么样的？聚类之后的节点保留多少比较合适，这个是怎么定的？我能想到的就是按item embedding最最底层的聚类，之后的层按照当前中心点的表达在做上层聚类，一直到根节点，但这样的话，似乎node embedding本身是没啥用处的？</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/167339/subcomments/53004/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/167339/subcomments/53004/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-53004&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-53004" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/167339/subcomments/" method="POST" data-remote="true" data-target="#comment-167339-sub" data-done="$(&#39;#sub-comments-count-167339&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@朴致 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>
<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-30T11:41:15+08:00">2018-03-30 11:41:15</time>
    </div>

    <div class="content unsafe md">
      <p><a href="https://www.atatech.org/users/298704">@<span></span>朴致</a> 树学习聚类方法在arXiv论文中有详细的描述。简单来说我们会在模型训练得到的叶子Embedding集合上，采用自顶向下kmeans（k=2）切割的方式递归形成完全二叉结构，最终的叶子对应一个Item。在树学习聚类方法中，模型学习到的中间节点Embedding确实没有参与聚类计算，这块我们也在考虑如何充分利用，包括聚类方法以外的树结构调整策略和算法等。<br>
也欢迎更多的沟通和交流想法~</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/167339/subcomments/53107/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/167339/subcomments/53107/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-53107&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-53107" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/167339/subcomments/" method="POST" data-remote="true" data-target="#comment-167339-sub" data-done="$(&#39;#sub-comments-count-167339&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>
<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/298704" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/136528.80x80.jpg">朴致</a>
                  <time class="pull-right small js-relative-time" datetime="2018-04-02T12:45:08+08:00">2018-04-02 12:45:08</time>
    </div>

    <div class="content unsafe md">
      <p>明白了，很棒的工作，赞！</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/167339/subcomments/53178/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/167339/subcomments/53178/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-53178&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-53178" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/167339/subcomments/" method="POST" data-remote="true" data-target="#comment-167339-sub" data-done="$(&#39;#sub-comments-count-167339&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@朴致 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>

  

</div>


<form target="_self" action="https://www.atatech.org/comments/167339/subcomments/" method="POST" data-remote="true" data-target="#comment-167339-sub" data-done="$(&#39;#sub-comments-count-167339&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-167809">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        7F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/66754" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/065420.80x80.jpg">随空</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-167809" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-03-24T16:50:26+08:00">2018-03-24 16:50:26</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>浩大工程，非常不容易，赞👍</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/167809/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/167809/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-167809&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-167809">0</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-167809" style="display:none">
      <div class="sub-comments media-list" id="comment-167809-sub">


  

</div>


<form target="_self" action="https://www.atatech.org/comments/167809/subcomments/" method="POST" data-remote="true" data-target="#comment-167809-sub" data-done="$(&#39;#sub-comments-count-167809&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-168670">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        8F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/74866" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/074035.80x80.jpg">想念</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-168670" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-03-30T10:32:49+08:00">2018-03-30 10:32:49</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>赞一个</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/168670/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/168670/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-168670&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-168670">0</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-168670" style="display:none">
      <div class="sub-comments media-list" id="comment-168670-sub">


  

</div>


<form target="_self" action="https://www.atatech.org/comments/168670/subcomments/" method="POST" data-remote="true" data-target="#comment-168670-sub" data-done="$(&#39;#sub-comments-count-168670&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-168675">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        9F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/342968" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/145975.80x80.jpg">持己</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-168675" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-03-30T10:42:44+08:00">2018-03-30 10:42:44</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>厉害了，代码能开源吗？</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/168675/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/168675/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-168675&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-168675">1</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-168675">
      <div class="sub-comments media-list" id="comment-168675-sub">

<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-30T12:34:12+08:00">2018-03-30 12:34:12</time>
    </div>

    <div class="content unsafe md">
      <p>我们有开源的规划，但因为TDM的较多功能由底层的XDL平台做支持，所以还依赖于XDL的开源计划和进度。关于XDL及其开源相关具体可以关注一下这篇ATA：<a href="https://www.atatech.org/articles/95643">https://www.atatech.org/articles/95643</a><br>
开源如果有进一步进展，我们也会在此ATA进行同步。</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/168675/subcomments/53110/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <a href="https://www.atatech.org/comments/168675/subcomments/53110/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        2
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-53110&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-53110" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/168675/subcomments/" method="POST" data-remote="true" data-target="#comment-168675-sub" data-done="$(&#39;#sub-comments-count-168675&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>

  

</div>


<form target="_self" action="https://www.atatech.org/comments/168675/subcomments/" method="POST" data-remote="true" data-target="#comment-168675-sub" data-done="$(&#39;#sub-comments-count-168675&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-168721">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        10F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/303190" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/137441.80x80.jpg">晨寒</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-168721" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-03-30T13:36:31+08:00">2018-03-30 13:36:31</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>Hi，问下已经有tree-structure的情况下，node的初始embedding是怎么初始化的？有利用到tree结构吗？</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/168721/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/168721/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-168721&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-168721">1</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-168721">
      <div class="sub-comments media-list" id="comment-168721-sub">

<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-03-30T16:25:36+08:00">2018-03-30 16:25:36</time>
    </div>

    <div class="content unsafe md">
      <p>节点的Embedding初始化采用的是随机初始化，没有利用树结构。</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/168721/subcomments/53127/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/168721/subcomments/53127/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-53127&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-53127" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/168721/subcomments/" method="POST" data-remote="true" data-target="#comment-168721-sub" data-done="$(&#39;#sub-comments-count-168721&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>

  

</div>


<form target="_self" action="https://www.atatech.org/comments/168721/subcomments/" method="POST" data-remote="true" data-target="#comment-168721-sub" data-done="$(&#39;#sub-comments-count-168721&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-169159">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        11F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/6165" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/018928.80x80.jpg">五福</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-169159" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-04-03T13:03:11+08:00">2018-04-03 13:03:11</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>能够从系统的召回/匹配以及排序角度看到搜索推荐广告一体化的大趋势，更能作出大胆的探索，前进路上不孤独！fyi. 在我们的工程体系里，有了插件机制可以灵活的支持拍立淘、faissy以及nsg类的向量召回方法了。</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/169159/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/169159/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-169159&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-169159">1</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-169159">
      <div class="sub-comments media-list" id="comment-169159-sub">

<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-04-03T17:55:26+08:00">2018-04-03 17:55:26</time>
    </div>

    <div class="content unsafe md">
      <p>感谢五福老师的指导和鼓励！<br>
确实，搜索推荐广告一体化是技术发展的大趋势，而在这趋势的引领下阿里妈妈精准定向广告团队也正在开展相关的业务融合尝试，如自然和商业流量最优化融合算法等，相信不远的未来可以为大家做更多的分享。<br>
主搜的工程体系及其灵活支持下的向量召回方法声名远播早有耳闻，我们也有学习和借鉴。希望未来有机会可以与主搜工程团队在算法工程方面有更多的切磋和交流^_^</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/169159/subcomments/53258/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/169159/subcomments/53258/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-53258&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-53258" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/169159/subcomments/" method="POST" data-remote="true" data-target="#comment-169159-sub" data-done="$(&#39;#sub-comments-count-169159&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>

  

</div>


<form target="_self" action="https://www.atatech.org/comments/169159/subcomments/" method="POST" data-remote="true" data-target="#comment-169159-sub" data-done="$(&#39;#sub-comments-count-169159&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-169368">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        12F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/141389" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/089878.80x80.jpg">艾耳</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-169368" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-04-04T14:10:42+08:00">2018-04-04 14:10:42</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>提个问题 这套树结构如何解决新item的问题了？只能全量重建吗？</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/169368/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/169368/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-169368&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-169368">1</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-169368">
      <div class="sub-comments media-list" id="comment-169368-sub">

<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-04-04T22:20:17+08:00">2018-04-04 22:20:17</time>
    </div>

    <div class="content unsafe md">
      <p>全量重建与否取决于采用何种训练方式。如果采用树-模型联合训练，全量重建本身就是过程的一部分，新Item的冷启动也会随着联合训练的全量重建被相应解决；如果不采用联合训练，也即树初始化后固定不变，那么也可以采用长短期迭代的方式，即短期内可以把新Item以某种关系计算挂载到当前树最接近的父节点上（TDM支持不完全n叉），然后进行采样和训练，长期上可以周期性在包含了当前所有新Item的全集合上进行全量重建，进而采样和训练。除了因地制宜的设计（新Item）树更新策略外，解决新Item冷启动也依赖于样本&amp;模型更新的速度，这里可以通过加速（周期性）模型产出或者采用增量模型训练的方式来实现，这方面我们也在做相关尝试。<br>
如果有其他好的idea也希望大家多沟通多交流~</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/169368/subcomments/53330/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <a href="https://www.atatech.org/comments/169368/subcomments/53330/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        2
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-53330&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-53330" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/169368/subcomments/" method="POST" data-remote="true" data-target="#comment-169368-sub" data-done="$(&#39;#sub-comments-count-169368&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>

  

</div>


<form target="_self" action="https://www.atatech.org/comments/169368/subcomments/" method="POST" data-remote="true" data-target="#comment-169368-sub" data-done="$(&#39;#sub-comments-count-169368&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-170367">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        13F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/64393" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/064810.80x80.jpg">青干</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-170367" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-04-11T22:37:26+08:00">2018-04-11 22:37:26</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>请问在训练时候，怎样保证同层内感兴趣的节点的概率大于不感兴趣节点的概率？另外，请问你们尝试过pairwise的训练方式吗？因为你的样本天然就存在这种偏序关系。</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/170367/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/170367/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-170367&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-170367">1</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-170367">
      <div class="sub-comments media-list" id="comment-170367-sub">

<div class="sub-comment media gaze in">
                    <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/166809" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/106083.80x80.jpg">壶源</a>
                  <time class="pull-right small js-relative-time" datetime="2018-04-12T23:20:46+08:00">2018-04-12 23:20:46</time>
    </div>

    <div class="content unsafe md">
      <p>在训练时，单层上有行为的取为正样本（认为感兴趣），通过随机负采样的方式得到负样本（认为不感兴趣），然后通过point-wise的loss function让正样本概率尽量大，负样本概率尽量小。pair-wise理论上是更贴切的建模方式，我们也正在做这方面的尝试，后续有进一步结论了会再同步大家。<br>
欢迎更多交流沟通~</p>

    </div>

    <div class="actions clearfix">
      <a href="https://www.atatech.org/comments/170367/subcomments/53616/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/170367/subcomments/53616/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comment-53616&#39;).toggle().find(&#39;textarea&#39;).focusend()"><span class="glyphicon glyphicon-comment"></span></button>

          </div>

    <form target="_self" id="sub-comment-53616" class="js-active-on-valid js-comment-create" style="display:none" action="https://www.atatech.org/comments/170367/subcomments/" method="POST" data-remote="true" data-target="#comment-170367-sub" data-done="$(&#39;#sub-comments-count-170367&#39;).inc();$(this).hide();$.scrollTo($r)">
      <input type="hidden" name="isCheck" value="1">
            <div class="form-group">
        <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" required="">@壶源 </textarea>          
      </div>
      <div class="form-group text-right">
        <button type="reset" class="btn btn-default btn-sm" onclick="$(this.form).hide()">取消</button>
        <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
      </div>
    </form>
  </div><!-- /.media-body -->

  </div>

  

</div>


<form target="_self" action="https://www.atatech.org/comments/170367/subcomments/" method="POST" data-remote="true" data-target="#comment-170367-sub" data-done="$(&#39;#sub-comments-count-170367&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>
<div class="comment media gaze in" id="comment-177329">
  <div class="pull-left">
                      <span style="margin-left: 10px">
        14F
    </span>
      </div>
  <div class="media-body">
    <div class="source clearfix">
      <a href="https://www.atatech.org/users/104613" class="author trigger_avatar" avatar="https://work.alibaba-inc.com/photo/081475.80x80.jpg">梵一</a>
                        <span class="pull-right small">
        <a target="_self" href="https://www.atatech.org/articles/102403#comment-177329" class="link"><span class="glyphicon glyphicon-link"></span></a>
        <time class="js-relative-time" datetime="2018-06-01T18:58:09+08:00">2018-06-01 18:58:09</time>
      </span>
    </div>

    <div class="content unsafe md">
      <p>一句话定论: 和deep match相比，也不说层次结构了，在那么大一个label的训练下，只能通过采样方式达到性能要求，在粗鲁的方式如nce方式下，文中方法和原始dm比，优势在于采样时限定了关系近的label，而不是原始的以大概率采高频的，所以学习得会更好。</p>

    </div>
    
        <div class="voters-p"></div>
    
    
    <div class="actions clearfix">
            <a href="https://www.atatech.org/comments/177329/voteup" title="赞" class="btn btn-link btn-sm action" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        0
      </a>
      <a href="https://www.atatech.org/comments/177329/unvoteup" title="取消赞" class="btn btn-link btn-sm action active" role="button" rel="nofollow" data-remote="true" data-method="post" data-done="$(this).closest(&#39;.comment&#39;).find(&#39;.voters-p:first&#39;).replaceWith(r);$(this).hide().siblings(&#39;:hidden&#39;).show()" style="display:none">
        <span class="glyphicon glyphicon-thumbs-up"></span>
        1
      </a>
      <span class="sep"></span>
      <button class="btn btn-link btn-sm action" onclick="$(&#39;#sub-comments-box-177329&#39;).toggle()">
        <span class="glyphicon glyphicon-comment"></span> 
        <span id="sub-comments-count-177329">0</span>
      </button>
            
          </div><!-- /.media-body -->
    
    <div class="sub-comments-box" id="sub-comments-box-177329" style="display:none">
      <div class="sub-comments media-list" id="comment-177329-sub">


  

</div>


<form target="_self" action="https://www.atatech.org/comments/177329/subcomments/" method="POST" data-remote="true" data-target="#comment-177329-sub" data-done="$(&#39;#sub-comments-count-177329&#39;).inc()" class="sub-comment-form js-comment-create js-active-on-valid">
  <input type="hidden" name="isCheck" value="1">
    <div class="form-group">
    <textarea name="content" rows="1" class="form-control js-mention js-auto-expand" placeholder="写下你的评论…" onfocus="$(this).closest(&#39;form&#39;).addClass(&#39;active&#39;)" required=""></textarea>
  </div>
  <div class="form-group text-right actions">
    <button type="reset" class="btn btn-default btn-sm" onclick="$(this).closest(&#39;form&#39;).removeClass(&#39;active&#39;)">取消</button>
    <button type="submit" class="btn btn-primary btn-sm" disabled="">评论</button>
  </div>
</form>
    </div><!-- /.sub-comments-box -->
  </div>

  </div>

<div class="pages comment-tip">
                
    
</div>
<script>require('comments')</script></div>

            <form target="_self" accept-charset="UTF-8" action="https://www.atatech.org/comments" method="POST" data-remote="true" data-target="#comments" class="js-comment-create js-active-on-valid">
              <input type="hidden" name="type" value="article">
              <input type="hidden" name="isCheck" value="1">
              <input type="hidden" name="pid" value="102403">
              <div class="form-group">
                <div class="editor">
                  <div class="editor-container">
                    <div class="editor-actions">
                      <button type="button" class="btn btn-xs editor-action js-editor-fullscreen" data-original-title="全屏">
                        <span class="glyphicon glyphicon-fullscreen"></span>
                      </button>
                      <button type="button" class="btn btn-xs editor-action js-editor-preview" data-original-title="预览">
                        <span class="glyphicon glyphicon-eye-open"></span>
                      </button>
                      <button type="button" class="btn btn-xs editor-action js-editor-upload" data-original-title="插入图片">
                        <span class="glyphicon glyphicon-picture"></span>
                      </button>
                    </div><!-- /.editor-actions -->
                    <textarea name="content" rows="4" class="form-control js-mention js-auto-expand editor-content" id="comment" placeholder="写下你的评论…" required=""></textarea>
                  </div><!-- /.editor-container -->

                  <div class="editor-preview-container">
                    <div class="editor-actions">
                      <button type="button" class="btn btn-xs editor-action js-editor-preview-off" data-original-title="取消预览">
                        <span class="glyphicon glyphicon-eye-close"></span>
                      </button>
                    </div><!-- /.editor-actions -->
                    <div class="editor-preview content unsafe" data-disable-with="&lt;span class=&quot;text-muted&quot;&gt;loading...&lt;/span&gt;"></div>
                  </div><!-- /.editor-preview-container -->
                </div><!-- /.editor  -->
              </div>
              <div class="form-group text-right">
                <button type="submit" class="btn btn-primary" disabled="">评论</button>
              </div>
            </form>
          </section><!-- /.comments -->
              </div><!-- /._article-box -->
    </div>
  </div><!-- /.container -->
        <footer class="footer" role="contentinfo">
  <div class="container">
	  <p class="copyright pull-left">
	  	© 2018 阿里巴巴集团 版权所有 Copyright© 18 ATA. All rights reserved.
      <script type="text/javascript">var cnzz_protocol = (("https:" === document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1254194462'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/stat.php%3Fid%3D1254194462%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script><span id="cnzz_stat_icon_1254194462"><a href="http://www.cnzz.com/stat/website.php?web_id=1254194462" target="_blank" title="站长统计"><img border="0" hspace="0" vspace="0" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/pic.gif"></a></span><script src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/stat.php" type="text/javascript"></script><script src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/core.php" charset="utf-8" type="text/javascript"></script></p>
    <ul class="list-inline pull-right">
      <li><a href="https://www.atatech.org/articles/67826" target="_blank">ATA社区常见问题汇总</a></li>
    </ul>
  </div>
</footer>
<script>require('module/global')</script>
<script>
  require('module/jquery.lazyload');
  $('img[data-original]').lazyload({effect: 'fadeIn'});
</script>
    <div id="modal-followers" class="modal fade" role="dialog" aria-labelledby="followers" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">关注者</h4>
      </div>
      <div class="modal-body"></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="submit" class="btn btn-primary">分享</button>
      </div>
    </div>
  </div>
</div><!-- /#modal-share -->  <div id="modal-share" class="modal fade" role="dialog" aria-labelledby="share" aria-hidden="true">
  <div class="modal-dialog">
    <form target="_self" action="https://www.atatech.org/articles/#{id}/share" method="POST" data-remote="true" data-done="$(this).closest(&#39;.modal&#39;).modal(&#39;hide&#39;);$(&#39;#share-group-or-team&#39;).selectize({plugins: [&#39;remove_button&#39;]})[0].selectize.clear();$($(this).data(&#39;shareCountTarget&#39;)).inc();$.alert(&#39;分享成功&#39;, &#39;success&#39;)" class="js-active-on-valid" novalidate="">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">分享</h4>
      </div>
      <div class="modal-body">
                                    <div class="form-group">
            <label for="share-group">分享到我的团队/圈子</label>
            a
            <select name="share-group-or-team[]" id="share-group-or-team" class="form-control selectized" autocomplete="off" placeholder="Groups or Teams" required="1" multiple="multiple" tabindex="-1" style="display: none;"></select><div class="selectize-control form-control multi plugin-remove_button"><div class="selectize-input items required not-full has-options"><input type="text" autocomplete="off" tabindex="" placeholder="请选择" required="" style="width: 46px;"></div><div class="selectize-dropdown form-control multi plugin-remove_button" style="display: none;"><div class="selectize-dropdown-content"></div></div></div>
        </div>
        <div class="form-group">
          <label for="share-users">分享给同事</label>
          <input type="text" name="users" class="form-control js-user-complete" id="share-users" placeholder="Users" required="1">
        </div>
        <div class="form-group">
          <textarea name="content" rows="3" class="form-control" placeholder="羞羞的内容"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="submit" class="btn btn-primary" disabled="">分享</button>
      </div>
    </div>
    </form>
  </div>
</div><!-- /#modal-share -->
<script>require('modal-share')</script>
<script>
$('#share-group-or-team').selectize({
    plugins: ['remove_button']
})[0].selectize.clear();
</script>
  <div id="modal-aliwork-share" class="modal fade" role="dialog" aria-labelledby="share" aria-hidden="true">
  <div class="modal-dialog">
    <form target="_self" action="https://www.atatech.org/articles/102403/sharetoaliwork" method="POST" data-remote="true" data-done="$(this).closest(&#39;.modal&#39;).modal(&#39;hide&#39;);$(&#39;#share-group-or-team&#39;).selectize({plugins: [&#39;remove_button&#39;]})[0].selectize.clear();$($(this).data(&#39;shareCountTarget&#39;)).inc();$.alert(&#39;分享成功&#39;, &#39;success&#39;)" class="js-active-on-valid" novalidate="">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h4 class="modal-title">分享到内外工作圈</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="share-group">超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)</label>
          </div>
          <div class="form-group share-detail">
            <div class="img-thumb"><img class="share-img" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/106083.80x80.jpg" width="60px" height="60px"></div>
            <div class="content-brief">作者：壶源，探微，谨持，玺羽，靖世
I 背景
推荐、搜索、广告投放是互联网内容提供商进行流量分配的核心业务，也是大数据和机器学习技术的典型应用场景。无论是推荐，搜索，还是广告投放问题，都可以描述为从大</div>
          </div>
          <div class="form-group">
            <textarea name="content" rows="3" class="form-control" placeholder="感谢你的分享！ 想对同学们说点什么？"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
          <button type="submit" class="btn btn-primary" disabled="">分享</button>
        </div>
      </div>
    </form>
  </div>
</div><!-- /#modal-share -->
<script>require('modal-share')</script>
<script>
  $(document).ready(function(){
     var imgSrc = $("._article img").attr("src");
     if (imgSrc != undefined) {
       $("#modal-aliwork-share .share-img").prop("src", imgSrc);
     }
  });
</script>
  <div id="modal-tag-history" class="modal fade" role="dialog" aria-labelledby="tag history" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">标签历史</h4>
      </div>
      <div class="modal-body">      
        <p class="text-muted">Loading...</p>
      </div>
    </div>
  </div>
</div><!-- /#modal-share -->
  <div id="modal-article-modify-history" class="modal fade" role="dialog" aria-labelledby="article modify history" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">编辑历史</h4>
      </div>
      <div class="modal-body">      
        <p class="text-muted">Loading...</p>
      </div>
    </div>
  </div>
</div><!-- /#modal-share -->

  <!-- markModal -->
  <div class="modal fade" id="my-mark-modal" tabindex="-1" role="dialog" aria-labelledby="myMarkModal" aria-hidden="true"></div>

      <link rel="stylesheet" href="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/video.css">
    <script src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/bundle.js"></script>
  
  <script data-group-id="" data-user-id="166809">require('module/mention')</script>  <script data-group-id="" data-user-id="166809">require('module/user-complete')</script>  <script>require('module/tools-favor')</script>
  <script>require('module/tag-complete')</script>
  <script>require('module/editor')</script>
  <script>require('module/mark');</script>
  <script>require('module/highlight');</script>
  <script src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/swfobject_modified.js"></script>
  <script>
    // 替换文章详情页图片地址避免出现下载
    $(document).on('click', '._article .content.unsafe a, comments-box.clearfix .content.unsafe a', function(e){
      var img = $(this).children('img');
      if(img.attr('src') != $(this).attr('href') || !img.attr('src').match(/[0-9a-z]{32}$/)) {
        return true;
      }
      $(this).attr('href', '/public/imageView?src=' + img.attr('src'));
      return true;
    });

    $('.js-video').on('click', function () {
      if ($('#taobao-online-video').length > 0) {
        swfobject.registerObject("taobao-online-video");
      }
    })

    $(function () {
      $('body').append('<div id="article-outline"><div style="overflow: hidden;"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button></div></div><style>#article-outline{display:none;min-width:140p;max-width: 200px; max-height: 450px;position:absolute;top:150px;left:-999px;border:1px solid #ccc;box-shadow:5px 5px 2px #ccc;padding: 5px 10px;background-color: #fff;overflow-y: auto;scroll-x: auto;}#article-outline ul{margin:5px 0 5px 0;padding-left:30px;font-size:12px;border-left:1px dotted #ccc;}#article-outline ul:first-child{padding-left:15px;border:none;}#article-outline li{list-style-type:decimal;margin:3px 0;}</style>')
      var jOutline = $('#article-outline');

      var jContent = $('article .content');
      var jContentHeight = jContent.height();
      jOutline.find('.close').on('click', function () {
        jOutline.hide();
      })

      updateOutline();

      var top = jOutline.offset().top;
      scrollOutline();
      $(window).on('scroll', scrollOutline);
      function scrollOutline() {
        var scrollTop = $(document).scrollTop();
        var maxTop = jContent.offset().top + jContent.height() - jOutline.height();
        if (scrollTop >= top && scrollTop <= maxTop) {
          jOutline.css({'position': 'fixed', 'top': 0});
        }
        else if (scrollTop < top) {
          jOutline.css({'position': 'absolute', 'top': '150px'});
        }
        else {
          jOutline.css({'position': 'absolute', 'top': maxTop + 'px'});
        }

      }

      function updateOutline() {
        var arrAllHeader = jContent.find("h1,h2,h3,h4,h5,h6");
        var arrOutline = ['<ul>'];
        var header, headerText;
        var id = 0;
        var level = 0,
            lastLevel = 1;
        var levelCount = 0;
        for (var i = 0, c = arrAllHeader.length; i < c; i++) {
          header = arrAllHeader[i];
          headerText = $(header).text();

          header.setAttribute('id', id);

          level = header.tagName.match(/^h(\d)$/i)[1];
          levelCount = level - lastLevel;

          if (levelCount > 0) {
            for (var j = 0; j < levelCount; j++) {
              arrOutline.push('<ul>');
            }
          } else if (levelCount < 0) {
            levelCount *= -1;
            for (var j = 0; j < levelCount; j++) {
              arrOutline.push('</ul>');
            }
          }
          ;
          arrOutline.push('<li>');
          arrOutline.push('<a target="_self" href="#' + id + '">' + headerText + '</a>');
          arrOutline.push('</li>');
          lastLevel = level;

          var html = '<a target="_self" class="article-anchor" href="#'+$(header).prop("id")+'" ><svg class="octicon octicon-link ancher-link" height="16" version="1.1" viewBox="0 0 16 16" width="16">' +
                     '<path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>'+
                     '</a>' +
                     $(header).html();
          $(header).html(html);
          id++;
        }
        arrOutline.push('</ul>')
        if (arrOutline.length > 2) {
          jOutline.append(arrOutline.join(''));
          jOutline.find('ul').each(function (i, n) {
            var jThis = $(this);
            if (jThis.children('li').length === 0) {
              jThis.replaceWith(jThis.children());
            }
          });
          showOutline();
        }
        else {
          hideOutline();
        }
      }

      // 设置锚点
      $("h1,h2,h3,h4,h5").hover(function(){
          $(this).find(".ancher-link").css({"visibility": "visible"});
        }, function(){
          $(this).find(".ancher-link").css({"visibility": "hidden"});
      });
      $("h1 .article-anchor,h2 .article-anchor,h3 .article-anchor,h4 .article-anchor,h5 .article-anchor").hover(function(){
        $(this).find(".ancher-link").css({"visibility": "visible"});
      }, function(){
        $(this).find(".ancher-link").css({"visibility": "hidden"});
      });
      function showOutline() {
        var offset = jContent.offset();

        jOutline.css({
          left: offset.left + jContent.width() + 10 + 'px',
        }).show();
      }

      function hideOutline() {
        jOutline.hide();
      }
    });
  </script>
  <script async="" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/mathjax%2F2.7.3%2FMathJax.js"></script>
  <script type="text/x-mathjax-config;executed=true">
  MathJax.Hub.Config({
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['\\$','\\$'], ["\\(","\\)"], ['$', '$'] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true,
      ignoreClass:"title"
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" }
    },
    displayAlign: "center"
  });
  </script>
  <a target="_self" href="https://www.atatech.org/articles/102403#" class="go-top" style=""><span class="glyphicon glyphicon-arrow-up"></span></a>
<script>require('module/go-top')</script>  <a href="https://work.alibaba-inc.com/work/group/8401" target="_blank" title="为ATA2.0提供反馈" style="position:fixed;right:0;bottom:0px;" class="hidden-xs">
  <img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/T17D1tFrVeXXcUfo_w-30-100.png" alt="">
</a>

                                                                            
                                                  
                                                                                                                    
<script type="text/javascript">
  // CNZZ事件统计
    var _czc = _czc || [];
  $(document).on('click', '.cnzz_block a', function (e) {
    var me = $(this),
      parent = me.parents('.cnzz_block');
    var cnzz_category = $('body').attr('cnzz_category'),
      cnzz_event = parent.attr('cnzz_event'),
      cnzz_label = '',
      cnzz_value = '', // me.attr('href').replace(/^.*\/(\d+?)[^\d]*$/, '$1'),
      cnzz_nodeid = parent.attr('id') || '';

    _czc.push(["_trackEvent", cnzz_category, cnzz_event, cnzz_label, cnzz_value, cnzz_nodeid]);

    // 给cnzz留点时间, 防止数据丢失
    var t, target = me.attr('target'), h = me.attr('href');
    if (!target && $('head base[target]').length == 0 || target == '_self') {
      if (h) {
        t = setTimeout(function () {
          clearTimeout(t);
          return true;
        }, 300);
        return true;
      }
    }

    return true;
  });
  
  // 搜索框icon按钮触发
  $('.form-submit-btn').click(function () {
    var form = $(this).parents('form');
    form.find('input').focus();
    form.submit();
  });

  // //实习生提醒
  // $('#intern-sure').click(function () {
  //   // var cookie_key = 'sfb';
  //   // $('.safepop_mask,.safepop_wrap').remove();
  //   // setcookie(cookie_key, 1, getTodaySeconsLeft());
  //   window.location.href = "/news/";
  // });

  // 导航 dropdown
  (function () {
    var t;
    $('.dropdown').hover(function () {
      var that = $(this);
      that.siblings().find('.dropdown-menu').hide();
      that.children('.dropdown-menu').show();
      clearTimeout(t);
    }, function () {
      var that = $(this);
      t = setTimeout(function () {
        that.children('.dropdown-menu').hide();
      }, 500)
    })
  }());
</script>

  <style>
    .atanlprobot-wrap {
    }

    .atanlprobot-wrap pre {
      display: block;
      padding: 9.5px;
      margin: 0 0 10px;
      font-size: 12px;
      line-height: 1.42857143;
      color: #333;
      word-break: break-all;
      word-wrap: break-word;
      background-color: #f5f5f5;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .atanlprobot-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .atanlprobot-list li {
      padding: 5px;
      text-overflow: ellipsis;
      white-space: nowrap;
      width: 100%;
      overflow: hidden;
      border-bottom: #ccc 1px solid;
    }

    .atanlprobot-list li:last-child {
      border-bottom: none;
    }

    .atanlprobot-list li span.tp {
      display: inline-block;
      padding: 3px;
      border-radius: 2px;
      color: #fff;
      background-color: #007bff;
      margin-right: 5px;
      opacity: .75;
    }

    .atanlprobot-list li span.tp-activity {
      color: #fff;
      background-color: #6610f2;
    }

    .atanlprobot-list li span.tp-article {
      color: #fff;
      background-color: #007bff;
    }

    .atanlprobot-list li span.tp-ask {
      color: #fff;
      background-color: #28a745;
    }

    .atanlprobot-list li span.tp-conference {
      color: #fff;
      background-color: #17a2b8;
    }

    .atanlprobot-list li span.tp-group {
      color: #000;
      background-color: #fd7e14;
    }

    .atanlprobot-list li span.tp-team {
      color: #000;
      background-color: #fd7e14;
    }

    .atanlprobot-list li span.tp-tool {
      color: #fff;
      background-color: #6f42c1;
    }

    .atanlprobot-list li span.tp-user {
      color: #000;
      background-color: #ffc107;
    }

    .atanlprobot-list li.operator {
    }

    .atanlprobot-list li.operator h3 {
      word-wrap: break-word;
      margin: 10px 0;
      font-size: 18px;
      white-space: normal;
    }

    .robot-parent .chat-text ul li.operator img {
      max-width: 100%;
    }

    .atanlprobot-list li.operator h4 {
      font-size: 14px;
      font-weight: 700;
      text-overflow: ellipsis;
      width: 100%;
      overflow: hidden;
    }

    .atanlprobot-list li.op-todytopic {
    }

    .atanlprobot-list li.op-todytopic blockquote {
      word-wrap: break-word;
      white-space: normal;
      font-size: 13px;
      padding: 10px;
      color: #888;
      background-color: #fff;
      border-radius: 3px;
    }

    .atanlprobot-list li.op-weekhot {
      /*text-align: center;*/
    }
  </style>
  <link href="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/robot.css" rel="stylesheet" type="text/css">
  <div id="robotContainer"><div class="robot-parent ui-draggable" style="left: 1031px;"><div class="robot-modal"><p class="chat-title ui-draggable-handle" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgb(34, 167, 240);"><i data-toggle="tooltip" data-placement="top" title="聊天记录" class="J_chat_convert" id="history"><img id="chat-img" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/history1.png"></i><span>艾獭</span><i class="J_hide_robot"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/close.png" style="width: 20px;"></i></p><div class="chat-main"><div class="chat-panel"><div class="chat-note" style="display: block;"><ul class="noteTemplate"><li class="chat-item other"><span class="triangle"></span><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/robot.png" alt="" class="img-circle chat-avatar"><time class="block fs-12 text-muted">机器人</time><div class="chat-bubble"><div class="note-content chat-text"><h4><a href="https://www.atatech.org/articles/98250">👉 艾獭使用说明</a></h4></div></div></li></ul></div><div class="chat-top"><div class="hot-div"><ul class="noteTemplate"><li class="chat-item other"><span class="triangle"></span><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/robot.png" alt="" class="img-circle chat-avatar"><time class="block fs-12 text-muted">机器人</time><div class="chat-bubble"><div class="chat-text"><div class="title"><i class="fa fa-question-circle-o"></i>热门问题</div><ul class="hot-ul"><li class="J_hot"><a><span>最近的热门文章</span><img class="key-down" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/chat-key.png"></a></li><li class="J_hot"><a><span>人工智能</span><img class="key-down" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/chat-key.png"></a></li><li class="J_hot"><a><span>点赞最多的文章</span><img class="key-down" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/chat-key.png"></a></li><li class="J_hot"><a><span>我关注的圈子的文章</span><img class="key-down" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/chat-key.png"></a></li><li class="J_hot"><a><span>我收藏的文章</span><img class="key-down" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/chat-key.png"></a></li></ul></div></div></li></ul></div></div><ul class="chat-ul"><li class="chat-item other"><span class="triangle"></span><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/robot.png" alt="" class="img-circle chat-avatar"><time class="block fs-12 text-muted">机器人 </time><div class="chat-bubble"><div class="chat-text"><span>亲，我是答疑机器人，需要我为您做点什么~~</span></div></div></li></ul></div><div class="form-group has-feedback"><div class="robot-extend"><a data-toggle="tooltip" id="chatBoxEmoji" data-placement="top" title="" class="history-icon" data-original-title="表情"> <img style="width:17px;" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/emoji.png"></a><div class="mod-plugin-smiley" id="chatEmojiPanel"><div class="J_Wrapper"><div class="arrow-bottom"></div><div class="J_Scroller scroller" id="emojiPanel"><ul class="smiley-ul-sqi" id="emojiSqi"><li class="ww-smiley" data-id="[微笑]" style="background-position:0 0"></li><li class="ww-smiley" data-id="[害羞]" style="background-position:0 -25px"></li><li class="ww-smiley" data-id="[吐舌头]" style="background-position:0 -50px"></li><li class="ww-smiley" data-id="[偷笑]" style="background-position:0 -75px"></li><li class="ww-smiley" data-id="[爱慕]" style="background-position:0 -100px"></li><li class="ww-smiley" data-id="[大笑]" style="background-position:0 -125px"></li><li class="ww-smiley" data-id="[跳舞]" style="background-position:0 -150px"></li><li class="ww-smiley" data-id="[飞吻]" style="background-position:0 -175px"></li><li class="ww-smiley" data-id="[安慰]" style="background-position:0 -200px"></li><li class="ww-smiley" data-id="[抱抱]" style="background-position:0 -225px"></li><li class="ww-smiley" data-id="[加油]" style="background-position:0 -250px"></li><li class="ww-smiley" data-id="[胜利]" style="background-position:0 -275px"></li><li class="ww-smiley" data-id="[强]" style="background-position:0 -300px"></li><li class="ww-smiley" data-id="[亲亲]" style="background-position:0 -325px"></li><li class="ww-smiley" data-id="[花痴]" style="background-position:0 -350px"></li><li class="ww-smiley" data-id="[露齿笑]" style="background-position:0 -375px"></li><li class="ww-smiley" data-id="[查找]" style="background-position:0 -400px"></li><li class="ww-smiley" data-id="[呼叫]" style="background-position:0 -425px"></li><li class="ww-smiley" data-id="[算账]" style="background-position:0 -450px"></li><li class="ww-smiley" data-id="[财迷]" style="background-position:0 -475px"></li><li class="ww-smiley" data-id="[好主意]" style="background-position:0 -500px"></li><li class="ww-smiley" data-id="[鬼脸]" style="background-position:0 -525px"></li><li class="ww-smiley" data-id="[天使]" style="background-position:0 -550px"></li><li class="ww-smiley" data-id="[再见]" style="background-position:0 -575px"></li><li class="ww-smiley" data-id="[流口水]" style="background-position:0 -600px"></li><li class="ww-smiley" data-id="[享受]" style="background-position:0 -625px"></li><li class="ww-smiley" data-id="[色情狂]" style="background-position:0 -650px"></li><li class="ww-smiley" data-id="[呆若木鸡]" style="background-position:0 -675px"></li><li class="ww-smiley" data-id="[思考]" style="background-position:0 -700px"></li><li class="ww-smiley" data-id="[迷惑]" style="background-position:0 -725px"></li><li class="ww-smiley" data-id="[疑问]" style="background-position:0 -750px"></li><li class="ww-smiley" data-id="[没钱了]" style="background-position:0 -775px"></li><li class="ww-smiley" data-id="[无聊]" style="background-position:0 -800px"></li><li class="ww-smiley" data-id="[怀疑]" style="background-position:0 -825px"></li><li class="ww-smiley" data-id="[嘘]" style="background-position:0 -850px"></li><li class="ww-smiley" data-id="[小样]" style="background-position:0 -875px"></li><li class="ww-smiley" data-id="[摇头]" style="background-position:0 -900px"></li><li class="ww-smiley" data-id="[感冒]" style="background-position:0 -925px"></li><li class="ww-smiley" data-id="[尴尬]" style="background-position:0 -950px"></li><li class="ww-smiley" data-id="[傻笑]" style="background-position:0 -975px"></li><li class="ww-smiley" data-id="[不会吧]" style="background-position:0 -1000px"></li><li class="ww-smiley" data-id="[无奈]" style="background-position:0 -1025px"></li><li class="ww-smiley" data-id="[流汗]" style="background-position:0 -1050px"></li><li class="ww-smiley" data-id="[凄凉]" style="background-position:0 -1075px"></li><li class="ww-smiley" data-id="[困了]" style="background-position:0 -1100px"></li><li class="ww-smiley" data-id="[晕]" style="background-position:0 -1125px"></li><li class="ww-smiley" data-id="[忧伤]" style="background-position:0 -1150px"></li><li class="ww-smiley" data-id="[委屈]" style="background-position:0 -1175px"></li><li class="ww-smiley" data-id="[悲泣]" style="background-position:0 -1200px"></li><li class="ww-smiley" data-id="[大哭]" style="background-position:0 -1225px"></li><li class="ww-smiley" data-id="[痛哭]" style="background-position:0 -1250px"></li><li class="ww-smiley" data-id="[I服了U]" style="background-position:0 -1275px"></li><li class="ww-smiley" data-id="[对不起]" style="background-position:0 -1300px"></li><li class="ww-smiley" data-id="[再见]" style="background-position:0 -1325px"></li><li class="ww-smiley" data-id="[皱眉]" style="background-position:0 -1350px"></li><li class="ww-smiley" data-id="[好累]" style="background-position:0 -1375px"></li><li class="ww-smiley" data-id="[吐]" style="background-position:0 -1400px"></li><li class="ww-smiley" data-id="[背]" style="background-position:0 -1425px"></li><li class="ww-smiley" data-id="[惊讶]" style="background-position:0 -1450px"></li><li class="ww-smiley" data-id="[惊愕]" style="background-position:0 -1475px"></li><li class="ww-smiley" data-id="[闭嘴]" style="background-position:0 -1500px"></li><li class="ww-smiley" data-id="[欠扁]" style="background-position:0 -1525px"></li><li class="ww-smiley" data-id="[鄙视你]" style="background-position:0 -1550px"></li><li class="ww-smiley" data-id="[大怒]" style="background-position:0 -1575px"></li><li class="ww-smiley" data-id="[生气]" style="background-position:0 -1600px"></li><li class="ww-smiley" data-id="[财神]" style="background-position:0 -1625px"></li><li class="ww-smiley" data-id="[学习雷锋]" style="background-position:0 -1650px"></li><li class="ww-smiley" data-id="[恭喜发财]" style="background-position:0 -1675px"></li><li class="ww-smiley" data-id="[小二]" style="background-position:0 -1700px"></li><li class="ww-smiley" data-id="[老大]" style="background-position:0 -1725px"></li><li class="ww-smiley" data-id="[邪恶]" style="background-position:0 -1750px"></li><li class="ww-smiley" data-id="[单挑]" style="background-position:0 -1775px"></li><li class="ww-smiley" data-id="[CS]" style="background-position:0 -1800px"></li><li class="ww-smiley" data-id="[隐形人]" style="background-position:0 -1825px"></li><li class="ww-smiley" data-id="[炸弹]" style="background-position:0 -1850px"></li><li class="ww-smiley" data-id="[惊声尖叫]" style="background-position:0 -1875px"></li><li class="ww-smiley" data-id="[漂亮MM]" style="background-position:0 -1900px"></li><li class="ww-smiley" data-id="[帅哥]" style="background-position:0 -1925px"></li><li class="ww-smiley" data-id="[招财猫]" style="background-position:0 -1950px"></li><li class="ww-smiley" data-id="[成交]" style="background-position:0 -1975px"></li><li class="ww-smiley" data-id="[鼓掌]" style="background-position:0 -2000px"></li><li class="ww-smiley" data-id="[握手]" style="background-position:0 -2025px"></li><li class="ww-smiley" data-id="[红唇]" style="background-position:0 -2050px"></li><li class="ww-smiley" data-id="[玫瑰]" style="background-position:0 -2075px"></li><li class="ww-smiley" data-id="[残花]" style="background-position:0 -2100px"></li><li class="ww-smiley" data-id="[爱心]" style="background-position:0 -2125px"></li><li class="ww-smiley" data-id="[心碎]" style="background-position:0 -2150px"></li><li class="ww-smiley" data-id="[钱]" style="background-position:0 -2175px"></li><li class="ww-smiley" data-id="[购物]" style="background-position:0 -2200px"></li><li class="ww-smiley" data-id="[礼物]" style="background-position:0 -2225px"></li><li class="ww-smiley" data-id="[收邮件]" style="background-position:0 -2250px"></li><li class="ww-smiley" data-id="[电话]" style="background-position:0 -2275px"></li><li class="ww-smiley" data-id="[举杯庆祝]" style="background-position:0 -2300px"></li><li class="ww-smiley" data-id="[时钟]" style="background-position:0 -2325px"></li><li class="ww-smiley" data-id="[等待]" style="background-position:0 -2350px"></li><li class="ww-smiley" data-id="[很晚了]" style="background-position:0 -2375px"></li><li class="ww-smiley" data-id="[飞机]" style="background-position:0 -2400px"></li><li class="ww-smiley" data-id="[支付宝]" style="background-position:0 -2425px"></li></ul></div></div></div><a data-toggle="tooltip" data-placement="top" title="" class="history-icon screenShot-button" data-original-title="一键截屏"> <img style="width:17px;" src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/photo1.png"></a></div><div class="input-group" style="margin:0px 0px 10px 0px;"><input type="textarea" id="chatInput" style="width:90%;border-color:rgba(120,130,140,0);margin: 10px 15px;" title="请您描述遇到的问题" placeholder="请描述遇到的问题，command+v可粘贴图片"><a class="over-link" style="display: none;">结束人工服务</a></div></div><a class="sendDingding" style="display: none;">催他一下</a></div><div class="chat-history"><div class="chat-history-left"><ul id="sqiChatDateUl"></ul></div><div class="left-history-control history-mini-right"><span></span></div><div class="chat-history-right"><ul class="chat-ul" id="sqiChatHistoryUl"></ul></div></div></div></div><a data-toggle="tooltip" data-placement="left" title="" id="sqi_robot" style="top: 200px; right: 0px; width: 80px; background: none;" data-original-title="艾獭"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/icon_robot.png"><span class="robot-info" style="display: none;">0</span></a><div id="userChatHistoryModal" tabindex="-1" role="dialog"><div class="modal-dialog" style="width:830px;"><div class="modal-content"><div class="modal-header" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgb(34, 167, 240);"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><i><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/close.png" style="width: 20px;"></i></button></div><div class="modal-body" style="text-align:center"><img id="imgLarge"></div></div></div></div><div id="screenShotModal" tabindex="-1" role="dialog"><div class="modal-dialog" style="width:830px;"><div class="modal-content"><div class="modal-header" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgb(34, 167, 240);"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><i><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/close.png" style="width: 20px;"></i></button></div><div class="modal-body screen-body" style="text-align:center"><div style=" text-align: right;padding: 10px 10px 0px 0px;"><div class="pen-wrapper"><button id="rovoked" class="pen-btn rovoked-btn"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/revoked.png">撤销</button><button id="pencil" class="pen-btn pencil-btn active-btn"><img src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/pencil.png">画笔</button></div></div><div class="canvas"></div></div><div class="modal-footer" style="text-align:center"><button type="button" id="sendScreenImg" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgb(34, 167, 240);">发送截屏</button></div></div></div></div></div>
  <script src="./超越“内积模型+向量检索”，自主创新的下一代匹配&amp;推荐技术：任意深度学习+树状全库检索(附KDD2018论文)_files/sqiRobot.js" type="text/javascript"></script>
  <script>
    $(function () {
      $('#robotContainer').sqiRobot({
        defineTitle: '艾獭',
//            bucId: user.bucId, // 当前用户bucId
        userNick: '梵昱', // 当前用户花名
        userCode: '107776',  // 当前用户工号
        productType: 'ata',
        chatBu: 'NOTSQI',  // 所属bu， 如果是非SQI应用，这里填 "NOTSQI"
        robotStyle: 'top:200px;right:0;width:80px', // 机器人图表的位置等自定义的style
        audio: false,
        appKey: "8a1afcb2-e97f-4ffa-bfc4-6c24440fa54f",
//            hostName: "pre.one-voice-platform.alibaba-inc.com",
                        draggable: true,
        markdown: false,
        customer: false
      });
    });
  </script>



<div class="alert-container"></div><div id="article-outline" style="left: 1195.5px; display: block; position: fixed; top: 0px;"><div style="overflow: hidden;"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button></div><ul><li><a target="_self" href="https://www.atatech.org/articles/102403#0">I 背景</a></li><li><a target="_self" href="https://www.atatech.org/articles/102403#1">II 相关技术</a></li><li><a target="_self" href="https://www.atatech.org/articles/102403#2">III 技术方案</a></li><li><a target="_self" href="https://www.atatech.org/articles/102403#3">IV 方案细节</a></li><ul><li><a target="_self" href="https://www.atatech.org/articles/102403#4">一，模型训练</a></li><li><a target="_self" href="https://www.atatech.org/articles/102403#5">二，结果预测</a></li><li><a target="_self" href="https://www.atatech.org/articles/102403#6">三，树联合训练</a></li></ul><li><a target="_self" href="https://www.atatech.org/articles/102403#7">V 实验效果</a></li><ul><li><a target="_self" href="https://www.atatech.org/articles/102403#8">一，召回率评估</a></li><li><a target="_self" href="https://www.atatech.org/articles/102403#9">二，新颖性评估</a></li><li><a target="_self" href="https://www.atatech.org/articles/102403#10">三，树结构对效果的促进</a></li></ul><li><a target="_self" href="https://www.atatech.org/articles/102403#11">VI 总结与展望</a></li><ul><li><a target="_self" href="https://www.atatech.org/articles/102403#12">一，总结</a></li><li><a target="_self" href="https://www.atatech.org/articles/102403#13">二，展望</a></li></ul><li><a target="_self" href="https://www.atatech.org/articles/102403#14">VII 感谢</a></li><li><a target="_self" href="https://www.atatech.org/articles/102403#15">VIII 附录</a></li></ul></div><style>#article-outline{display:none;min-width:140p;max-width: 200px; max-height: 450px;position:absolute;top:150px;left:-999px;border:1px solid #ccc;box-shadow:5px 5px 2px #ccc;padding: 5px 10px;background-color: #fff;overflow-y: auto;scroll-x: auto;}#article-outline ul{margin:5px 0 5px 0;padding-left:30px;font-size:12px;border-left:1px dotted #ccc;}#article-outline ul:first-child{padding-left:15px;border:none;}#article-outline li{list-style-type:decimal;margin:3px 0;}</style></body></html>